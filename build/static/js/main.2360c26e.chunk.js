(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{195:function(e,t,n){},198:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},290:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=290},291:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(23),c=n.n(r),i=n(1),s=n.n(i),o=n(48),l=n(10),d=(n(176),n(3)),u="LOGIN_SUCCESS",p="LOGIN_FAIL",j="LOAD_USER_SUCCESS",m="LOAD_USER_FAIL",b="AUTHENTICATED_SUCCESS",h="AUTHENTICATED_FAIL",f="AUTHENTICATED_SUCCESS",g="AUTHENTICATED_FAIL",O="AUTHENTICATED_SUCCESS",_="AUTHENTICATED_FAIL",x="LOG_OUT",v="SIGNUP_SUCCESS",y="SIGNUP_FAIL",S="ACTIVATION_SUCCESS",w="ACTIVATION_FAIL",C="PROFILE_CREATE_SUCCESS",k="PROFILE_CREATE_FAIL",N="PROFILE_RECEIVE_SUCCESS",I="PROFILE_RECEIVE_FAIL",E="PROFILE_UPDATE_SUCCESS",A="PROFILE_UPDATE_FAIL",T="PROFILE_DELETE_SUCCESS",R="PROFILE_DELETE_FAIL",D="IMGAE_CREATE_SUCCESS",F="IMAGE_CREATE_FAIL",U="IMAGE_RECEIVE_SUCCESS",L="IMAGE_RECEIVE_FAIL",P="IMAGE_DELETE_SUCCESS",M="IMAGE_DELETE_FAIL",J="SWIPE_CREATE_SUCCESS",q="SWIPE_CREATE_FAIL",z="SWIPE_RECEIVE_SUCCESS",B="SWIPE_RECEIVE_FAIL",G="SWIPE_UPDATE_SUCCESS",W="CARD_RECEIVE_SUCCESS",V="CARD_RECEIVE_FAIL",H="CHAT_CREATE_SUCCESS",Y="CHAT_CREATE_SUCCESS",K="CHAT_FETCH_MESSAGES_SUCCESS",Z="CHAT_NEW_MESSAGE_SUCCESS",Q="CHAT_FETCH_FILES_SUCCESS",X="CHAT_NEW_FILE_SUCCESS",$="SET_FRIEND",ee="SEND_FIRST_MESSAGE_SUCCESS",te="SEND_FIRST_MESSAGE_FAIL",ne="CONTACT_CREATE_SUCCESS",ae="CONTACT_CREATE_FAIL",re="CONTACT_RECEIVE_SUCCESS",ce="CONTACT_RECEIVE_FAIL",ie="ERROR",se="REMOVE_ERROR",oe="BACK_TO_HOME",le={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!1,name:localStorage.getItem("name"),id:localStorage.getItem("id"),error:"",activation:""};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case u:return localStorage.setItem("access",a.access),localStorage.setItem("refresh",a.refresh),Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!0,access:a.access,refresh:a.refresh,id:a.id});case p:case y:case x:return localStorage.removeItem("name"),localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("id"),Object(d.a)(Object(d.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,name:null,id:null});case j:return localStorage.setItem("id",a.id),localStorage.setItem("name",a.name),Object(d.a)(Object(d.a)({},e),{},{name:a.name,id:a.id});case m:return Object(d.a)(Object(d.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,name:null,id:null});case b:return Object(d.a)(Object(d.a)({},e),{},{name:a.name});case h:return Object(d.a)(Object(d.a)({},e),{},{name:null,id:null});case v:return Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!0,id:a.id,activation:"Your account's been created successfully! Check your email and activate your account."});case f:case g:case O:case _:case w:case S:return Object(d.a)({},e);case ie:return console.log("error",a),Object(d.a)(Object(d.a)({},e),{},{error:a});case se:return Object(d.a)(Object(d.a)({},e),{},{error:""});case oe:return Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:null});default:return e}};function ue(e){return"null"===e||null===e?"":e}var pe={profile_id:localStorage.getItem("profile_id"),name:localStorage.getItem("name"),age:localStorage.getItem("age"),gender:localStorage.getItem("gender"),native_lan:localStorage.getItem("native_lan"),foreign_lan:localStorage.getItem("foreign_lan"),images:JSON.parse(localStorage.getItem("profile_images")),location:localStorage.getItem("location"),time_start:"null"!==localStorage.getItem("time_start")?localStorage.getItem("time_start"):"",time_end:ue(localStorage.getItem("time_end")),intro:"null"!==localStorage.getItem("intro")?localStorage.getItem("intro"):"",freeday:"null"!==localStorage.getItem("freeday")?localStorage.getItem("freeday"):""};var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case N:case E:return console.log("PROFILE REDUCER"),""!==ue(a.image)?a.image:"",localStorage.setItem("profile_id",a.id),localStorage.setItem("name",a.name),localStorage.setItem("age",a.age),localStorage.setItem("gender",a.gender),localStorage.setItem("native_lan",a.native_lan),localStorage.setItem("foreign_lan",a.foreign_lan),localStorage.setItem("profile_images",JSON.stringify(a.images)),localStorage.setItem("location",a.location),localStorage.setItem("time_start",a.time_start),localStorage.setItem("time_end",a.time_end),localStorage.setItem("intro",a.intro),localStorage.setItem("freeday",a.freeday),Object(d.a)(Object(d.a)({},e),{},{profile_id:a.id,name:a.name,age:a.age,gender:a.geder,native_lan:a.native_lan,foreign_lan:a.foreign_lan,images:a.images,location:a.location,time_start:ue(a.time_start),time_end:ue(a.time_end),intro:a.intro,freeday:a.freeday});case T:case x:return localStorage.removeItem("profile_id"),localStorage.removeItem("name"),localStorage.removeItem("age"),localStorage.removeItem("gender"),localStorage.removeItem("native_lan"),localStorage.removeItem("foreign_lan"),localStorage.removeItem("profile_images"),localStorage.removeItem("location"),localStorage.removeItem("time_start"),localStorage.removeItem("time_end"),localStorage.removeItem("intro"),localStorage.removeItem("freeday"),Object(d.a)(Object(d.a)({},e),{},{profile_id:null,name:null,age:null,gender:null,native_lan:null,foreign_lan:null,images:null,location:null,time_start:null,time_end:null,intro:null,freeday:null});case C:return Object(d.a)(Object(d.a)({},e),{},{profile_id:a.id});case A:case I:case R:case G:default:return Object(d.a)({},e)}},me={swipe_id:localStorage.getItem("swipe_id"),cards:JSON.parse(localStorage.getItem("cards")),swiped:JSON.parse(localStorage.getItem("swiped")),liked:JSON.parse(localStorage.getItem("liked"))};var be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case J:return Object(d.a)(Object(d.a)({},e),{},{swipe_id:a.id});case z:return localStorage.setItem("swipe_id",a.id),localStorage.setItem("swiped",JSON.stringify(a.swiped)),localStorage.setItem("liked",JSON.stringify(a.liked)),Object(d.a)(Object(d.a)({},e),{},{swipe_id:a.id,swiped:a.swiped,liked:a.liked});case q:case B:case V:return Object(d.a)({},e);case x:return localStorage.removeItem("swipe_id"),localStorage.removeItem("swiped"),localStorage.removeItem("liked"),localStorage.removeItem("cards"),Object(d.a)({},e);case W:return localStorage.setItem("cards",JSON.stringify(a)),Object(d.a)(Object(d.a)({},e),{},{cards:a});default:return Object(d.a)({},e)}},he=n(19),fe={messages:[],files:[],latest_chat_id:localStorage.getItem("latest_chat_id"),friend_image:localStorage.getItem("friend_image"),when_matched:localStorage.getItem("when_matched"),friend_profile_id:localStorage.getItem("friend_profile_id")};var ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case H:return console.log(a),localStorage.setItem("latest_chat_id",a.id),Object(d.a)(Object(d.a)({},e),{},{latest_chat_id:a.id});case Y:case te:return Object(d.a)({},e);case K:return Object(d.a)(Object(d.a)({},e),{},{messages:a.reverse()});case Z:return Object(d.a)(Object(d.a)({},e),{},{messages:[].concat(Object(he.a)(e.messages),[a[0]])});case Q:return Object(d.a)(Object(d.a)({},e),{},{files:a.reverse()});case X:return Object(d.a)(Object(d.a)({},e),{},{files:[].concat(Object(he.a)(e.files),[a[0]])});case $:return localStorage.setItem("friend_image",a.image),localStorage.setItem("when_matched",a.when_matched),localStorage.setItem("friend_profile_id",a.friend_profile_id),Object(d.a)(Object(d.a)({},e),{},{friend_image:a.image,when_matched:a.when_matched,friend_profile_id:a.friend_profile_id});case x:return localStorage.removeItem("friend_image"),localStorage.removeItem("when_matched"),localStorage.removeItem("friend_profile_id"),Object(d.a)(Object(d.a)({},e),{},{friend_image:null,when_matched:null,friend_profile_id:null});case ee:default:return Object(d.a)({},e)}},Oe={contact_id:localStorage.getItem("contact_id")};var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ne:return Object(d.a)(Object(d.a)({},e),{},{contact_id:a.id});case ae:case ce:return Object(d.a)({},e);case re:return localStorage.setItem("contact_id",a.id),Object(d.a)(Object(d.a)({},e),{},{contact_id:a.id});case x:return localStorage.removeItem("contact_id"),Object(d.a)(Object(d.a)({},e),{},{contact_id:null});default:return Object(d.a)({},e)}},xe={images:JSON.parse(localStorage.getItem("images"))};var ve=Object(o.combineReducers)({auth_reducer:de,profile_reducer:je,swipe_reducer:be,chat_reducer:ge,contact_reducer:_e,image_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case D:return Object(d.a)({},e);case U:return localStorage.setItem("images",JSON.stringify(a.images)),Object(d.a)(Object(d.a)({},e),{},{images:Object(he.a)(a.images)});case F:case M:case L:case P:return Object(d.a)({},e);case x:return localStorage.removeItem("images"),Object(d.a)(Object(d.a)({},e),{},{images:null});default:return Object(d.a)({},e)}}}),ye=n(14),Se=n(17),we=n(5),Ce=n.n(we),ke=n(11),Ne=n(9),Ie=n.n(Ne),Ee=function(){return function(){var e=Object(ke.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=16;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},a=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,Ie.a.post("".concat("http://127.0.0.1:8000","/auth/jwt/verify/"),a,n);case 6:"token_not_valid"!==e.sent?t({type:b}):(t({type:h}),t({type:ie,payload:"Token is not valid"})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:h}),t({type:ie,payload:e.t0.response.request.response});case 14:e.next=18;break;case 16:t({type:h,payload:"An error occured. Please try again"}),t({type:ie,payload:"An error occured. Please try again"});case 18:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},Ae=function(){return function(e){e({type:se})}},Te=n.p+"static/media/home_page4.fe3e870c.jpg",Re=n(35),De=n.n(Re),Fe=(n(195),Object(l.b)((function(e){return{activation:e.auth_reducer.activation}}),(function(e){return{remove_error:function(){return e(Ae())},back_to_home:function(){return e((function(e){e({type:oe})}))}}}))((function(e){var t;return t=window.innerWidth>650?{width:"100%",height:"800px",backgroundSize:"cover",backgroundImage:"url(".concat(Te,")")}:{width:"100%",height:"800px",backgroundSize:"cover",backgroundColor:"#ec7878"},Object(i.useEffect)((function(){e.remove_error(),e.back_to_home(),console.log("http://127.0.0.1:8000")}),[]),Object(a.jsxs)("div",{style:t,className:"home",children:[Object(a.jsxs)("div",{className:"home_title",children:[Object(a.jsx)(De.a,{id:"home_logo"}),Object(a.jsx)("h1",{children:"Speak Up"})]}),Object(a.jsx)("h1",{className:window.innerWidth>650?"home_intro":"home_intro2",children:"Find Your Language Exchange Partner!!"}),Object(a.jsx)(ye.b,{to:"/login",children:Object(a.jsx)("button",{className:"home_button1",onFocus:"this.blur();",children:Object(a.jsx)("span",{children:"Sign In"})})}),Object(a.jsx)(ye.b,{to:"/signup",children:Object(a.jsx)("button",{className:"home_button2",onFocus:"this.blur();",children:Object(a.jsx)("span",{children:"Sign Up"})})}),Object(a.jsx)("p",{style:{color:"yellow",textAlign:"center",fontSize:"25px"},children:e.activation})]})}))),Ue=n(16),Le=n(4),Pe=n(36),Me=n.n(Pe),Je=n(315),qe=function(e){return function(){var t=Object(ke.a)(Ce.a.mark((function t(n){var a;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ie.a.get("".concat("http://127.0.0.1:8000","/swipe/detail/").concat(e,"/"));case 3:a=t.sent,n({type:z,payload:a.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:B,payload:t.t0.response}),n({type:ie,payload:t.t0.response});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ze=function(e){return function(){var t=Object(ke.a)(Ce.a.mark((function t(n){var a;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ie.a.get("".concat("http://127.0.0.1:8000","/profile/image/").concat(e,"/"));case 3:a=t.sent,console.log("images::",a.data),n({type:U,payload:a.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:L}),n({type:ie});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Be=(n(198),n(58)),Ge=Object(l.b)((function(e){return{isAuthenticated:e.auth_reducer.isAuthenticated,id:e.auth_reducer.id,error:e.auth_reducer.error,profile_id:e.profile_reducer.profile_id,contact_id:e.contact_reducer.contact_id,swipe_id:e.swipe_reducer.swipe_id,images:e.image_reducer.images}}),(function(e){return{login:function(t,n){return e(function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){var r,c,i;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,Ie.a.post("".concat("http://127.0.0.1:8000","/auth/jwt/create/"),c,r);case 5:i=n.sent,console.log(i.data),a({type:u,payload:i.data}),a(function(){var e=Object(ke.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,Ie.a.get("".concat("http://127.0.0.1:8000","/auth/users/me/"),n);case 5:a=e.sent,console.log("data in load::",a.data),t({type:j,payload:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:m,payload:"An error occured. Please try again."});case 13:e.next=17;break;case 15:console.log("no access"),t({type:m,payload:"An error occured. Please try again"});case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(2),console.log(n.t0.response),a({type:p,payload:"Email or password is invalid."}),a({type:ie,payload:"Email or password is invalid."});case 16:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},receive_profile:function(t){return e(function(e){return function(){var t=Object(ke.a)(Ce.a.mark((function t(n){var a;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("PROFILE"),t.prev=1,t.next=4,Ie.a.get("".concat("http://127.0.0.1:8000","/profile/detail/").concat(e,"/"));case 4:a=t.sent,console.log("profile::",a.data),n({type:N,payload:a.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:I,payload:t.t0.response}),n({type:ie,payload:t.t0.response});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},receive_swipe:function(t){return e(qe(t))},receive_contact:function(t){return e(function(e){return function(){var t=Object(ke.a)(Ce.a.mark((function t(n){var a;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("CONTACT"),t.prev=1,t.next=4,Ie.a.get("".concat("http://127.0.0.1:8000","/chat-api/contact/detail/").concat(e,"/"));case 4:a=t.sent,n({type:re,payload:a.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:ce}),n({type:ie});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},remove_error:function(){return e(Ae())},image_receive:function(t){return e(ze(t))}}}))((function(e){var t=Object(i.useState)(!1),n=Object(Le.a)(t,2),r=n[0],c=n[1],s=Object(i.useState)(0),o=Object(Le.a)(s,2),l=o[0],u=o[1],p=Object(i.useState)({email:"",password:""}),j=Object(Le.a)(p,2),m=j[0],b=j[1];Object(i.useEffect)((function(){e.remove_error()}),[]);var h=m.email,f=m.password,g=function(e){return b(Object(d.a)(Object(d.a)({},m),{},Object(Ue.a)({},e.target.name,e.target.value)))};return console.log("count",l),e.id&&0===l&&(u(1),e.receive_contact(e.id)),e.contact_id&&1===l&&(u(2),e.receive_swipe(e.id)),e.swipe_id&&2===l&&(u(3),e.receive_profile(e.id)),e.profile_id&&3===l&&(u(4),e.image_receive(e.profile_id)),""!==e.error&&!0===r&&c(!1),null!==e.images?Object(a.jsx)(Se.a,{to:"/swipe"}):Object(a.jsxs)("div",{className:"login",children:[Object(a.jsxs)("header",{className:"login_header",children:[Object(a.jsx)(ye.b,{to:"/",children:Object(a.jsx)(Je.a,{id:"login_back",children:Object(a.jsx)(Me.a,{})})}),Object(a.jsxs)("div",{className:"login_title",children:[Object(a.jsx)(De.a,{id:"login_logo"}),Object(a.jsx)("h1",{children:"Speak Up"})]})]}),Object(a.jsxs)("div",{className:"login_form",children:[Object(a.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),c(!0),e.login(h,f),e.remove_error(),u(0)}(t)},children:[Object(a.jsx)("input",{className:"login_input",type:"email",placeholder:"Email",name:"email",value:h,onChange:function(e){return g(e)},required:!0}),Object(a.jsx)("input",{className:"login_input",type:"password",placeholder:"Password",name:"password",value:f,onChange:function(e){return g(e)},required:!0}),Object(a.jsx)("button",{className:"login_button",type:"submit",onfocus:"this.blur();",children:Object(a.jsx)("span",{children:"Log In"})})]}),Object(a.jsxs)("p",{className:"mt-3",children:["Don't have an account? ",Object(a.jsx)(ye.b,{to:"/signup",children:"Sign up"})]}),Object(a.jsxs)("p",{className:"mt-3",children:["Forget your password? ",Object(a.jsx)(ye.b,{to:"/reset_password",children:"Reset Password"})]}),Object(a.jsx)("p",{style:{color:"red",textAlign:"center"},children:e.error})]}),Object(a.jsx)("div",{style:{textAlign:"center"},children:r?Object(a.jsx)(Be.Default,{color:"aqua"}):Object(a.jsx)(a.Fragment,{})})]})})),We=(n(230),Object(l.b)((function(e){return{isAuthenticated:e.auth_reducer.isAuthenticated,id:e.auth_reducer.id,profile_id:e.profile_reducer.profile_id,contact_id:e.contact_reducer.contact_id,swipe_id:e.swipe_reducer.swipe_id,error:e.auth_reducer.error}}),(function(e){return{signup:function(t,n,a,r){return e(function(e,t,n,a){return function(){var r=Object(ke.a)(Ce.a.mark((function r(c){var i,s,o;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:e,email:t,password:n,re_password:a}),r.prev=2,r.next=5,Ie.a.post("".concat("http://127.0.0.1:8000","/auth/users/"),s,i);case 5:o=r.sent,c({type:v,payload:o.data}),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(2),console.log(r.t0),c({type:ie,payload:r.t0.response.request.response}),c({type:y,payload:r.t0.response.request.response});case 14:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))},profile_create:function(t,n,a,r,c){return e(function(e,t,n,a){return function(){var r=Object(ke.a)(Ce.a.mark((function r(c){var i,s,o;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==e){r.next=16;break}return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({user:e,name:t,native_lan:n,foreign_lan:a}),r.prev=3,r.next=6,Ie.a.post("".concat("http://127.0.0.1:8000","/profile/create/"),s,i);case 6:o=r.sent,c({type:C,payload:o.data}),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(3),c({type:k,paylaod:r.t0.response.request.response}),c({type:ie,payload:r.t0.response.request.response});case 14:r.next=18;break;case 16:c({type:k}),c({type:ie,payload:"An error occured. Please try again"});case 18:case"end":return r.stop()}}),r,null,[[3,10]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))},swipe_create:function(t){return e((n=t,function(){var e=Object(ke.a)(Ce.a.mark((function e(t){var a,r,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(JSON.stringify({user:n})),null==n){e.next=17;break}return e.prev=2,a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({user:n}),e.next=7,Ie.a.post("".concat("http://127.0.0.1:8000","/swipe/create/"),r,a);case 7:c=e.sent,t({type:J,payload:c.data}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),t({type:q,payload:e.t0.response.request.response}),t({type:ie,payload:e.t0.response.request.response});case 15:e.next=19;break;case 17:t({type:q}),t({type:ie,payload:"An error occured. Please try again."});case 19:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()));var n},contact_create:function(t){return e(function(e){return function(){var t=Object(ke.a)(Ce.a.mark((function t(n){var a,r,c;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e){t.next=16;break}return a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({user:e}),t.prev=3,t.next=6,Ie.a.post("".concat("http://127.0.0.1:8000","/chat-api/contact/create/"),r,a);case 6:c=t.sent,n({type:ne,payload:c.data}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),n({type:ae,payload:t.t0.response.request.response}),n({type:ie,payload:t.t0.response.request.response});case 14:t.next=18;break;case 16:n({type:ae}),n({type:ie,paylaod:"An error occured. Please try again."});case 18:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},remove_error:function(){return e(Ae())}}}))((function(e){var t=Object(i.useState)(!1),n=Object(Le.a)(t,2),r=(n[0],n[1]),c=Object(i.useState)(!1),s=Object(Le.a)(c,2),o=s[0],l=s[1],u=Object(i.useState)(0),p=Object(Le.a)(u,2),j=p[0],m=p[1],b=Object(i.useState)({name:"",email:"",password:"",re_password:"",native_lan:"",foreign_lan:""}),h=Object(Le.a)(b,2),f=h[0],g=h[1];Object(i.useEffect)((function(){e.remove_error()}),[]);var O=f.name,_=f.email,x=f.password,v=f.re_password,y=f.native_lan,S=f.foreign_lan,w=function(e){return g(Object(d.a)(Object(d.a)({},f),{},Object(Ue.a)({},e.target.name,e.target.value)))};e.id&&e.isAuthenticated&&0===j&&(m(1),e.profile_create(e.id,O,y,S)),e.profile_id&&1===j&&(m(2),e.swipe_create(e.id)),e.swipe_id&&2===j&&(m(3),e.contact_create(e.id)),""!==e.error&&!0===o&&l(!1);var C=["Arabic","Bengali","Burmese","Chinese","English","French","German","Gujarati","Hindi","Italian","Japanese","Kannada","Korean","Malayalam","Marathi","Oriya","Panjabi","Persian","Polish","Portuguese","Russian","Spanish","Tamil","Telugu","Thai","Turkish","Ukrainian","Urdu","Vietnamese"];return e.isAuthenticated&&e.contact_id&&3===j?Object(a.jsx)(Se.a,{to:"/"}):Object(a.jsxs)("div",{className:"signup",children:[Object(a.jsxs)("header",{className:"signup_header",children:[Object(a.jsx)(ye.b,{to:"/",children:Object(a.jsx)(Je.a,{id:"signup_back",children:Object(a.jsx)(Me.a,{})})}),Object(a.jsxs)("div",{className:"signup_title",children:[Object(a.jsx)(De.a,{id:"signup_logo"}),Object(a.jsx)("h1",{children:"Speak Up"})]})]}),Object(a.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),l(!0),e.signup(O,_,x,v),e.remove_error(),r(!0)}(t)},children:[Object(a.jsxs)("div",{className:"signup_form",children:[Object(a.jsxs)("div",{className:"col signup_form1",children:[Object(a.jsx)("input",{className:"signup_input",type:"name",placeholder:"Name*",name:"name",value:O,onChange:function(e){return w(e)},required:!0}),Object(a.jsx)("input",{className:"signup_input",type:"email",placeholder:"Email*",name:"email",value:_,onChange:function(e){return w(e)},required:!0}),Object(a.jsx)("input",{className:"signup_input",type:"password",placeholder:"Password*",name:"password",value:x,onChange:function(e){return w(e)},required:!0}),Object(a.jsx)("input",{className:"signup_input",type:"password",placeholder:"Confirm Password*",name:"re_password",value:v,onChange:function(e){return w(e)},required:!0})]}),Object(a.jsxs)("div",{className:"col signup_form2",children:[Object(a.jsxs)("div",{className:"signup_lan",children:["What language are you fluent in?",Object(a.jsxs)("select",{className:"signup_select",name:"native_lan",required:!0,onChange:function(e){return w(e)},children:[Object(a.jsx)("option",{hidden:!0,children:"You speak ..."}),C.map((function(e){return Object(a.jsx)("option",{value:e,children:e})}))]})]}),Object(a.jsxs)("div",{className:"signup_lan",children:["What do you want to learn?",Object(a.jsxs)("select",{className:"signup_select",name:"foreign_lan",required:!0,onChange:function(e){return w(e)},children:[Object(a.jsx)("option",{hidden:!0,children:"You want to learn ..."}),C.map((function(e){return Object(a.jsx)("option",{value:e,children:e})}))]})]})]})]}),Object(a.jsx)("div",{className:"signup_button",children:Object(a.jsx)("button",{onFocus:"this.blur();",type:"submit",children:Object(a.jsx)("span",{children:"Sign Up"})})})]}),Object(a.jsxs)("p",{style:{textAlign:"center"},children:["Already have an account? ",Object(a.jsx)(ye.b,{to:"/login",children:"Log in"})]}),Object(a.jsx)("p",{style:{color:"red",textAlign:"center"},children:e.error}),Object(a.jsx)("div",{style:{textAlign:"center"},children:o?Object(a.jsx)(Be.Default,{color:"palevioletred"}):Object(a.jsx)(a.Fragment,{})})]})}))),Ve=Object(l.b)((function(e,t){return{isAuthenticated:e.auth_reducer.isAuthenticated,uid:t.match.params.uid,token:t.match.params.token}}),(function(e){return{verify:function(t,n){return e(function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){var r,c,i;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({uid:e,token:t}),n.prev=2,n.next=5,Ie.a.post("".concat("http://127.0.0.1:8000","/auth/users/activation/"),c,r);case 5:i=n.sent,a({type:S,payload:i.data}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:w,payload:n.t0.response.request.response}),a({type:ie,payload:n.t0.response.request.response});case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=Object(i.useState)(!1),n=Object(Le.a)(t,2),r=n[0],c=n[1];return r?Object(a.jsx)(Se.a,{to:"/"}):Object(a.jsx)("div",{className:"eontainer mt-5",children:Object(a.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"},children:[Object(a.jsx)("h1",{children:"Verify your account:"}),Object(a.jsx)("button",{onClick:function(t){console.log(e.uid,e.token),e.verify(e.uid,e.token),c(!0)},style:{marginTop:"50px"},type:"button",className:"btn btn-primary",children:"Verify"})]})})})),He=(n(231),Object(l.b)(null,(function(e){return{reset_password:function(t){return e(function(e){return function(){var t=Object(ke.a)(Ce.a.mark((function t(n){var a,r,c;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=2,t.next=5,Ie.a.post("".concat("http://127.0.0.1:8000","/auth/users/reset_password/"),r,a);case 5:c=t.sent,n({type:f,payload:c.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),n({type:g,payload:t.t0.response.request.response}),n({type:ie,payload:t.t0.response.request.response});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(i.useState)(!1),n=Object(Le.a)(t,2),r=n[0],c=n[1],s=Object(i.useState)({email:""}),o=Object(Le.a)(s,2),l=o[0],u=o[1],p=l.email;return r?Object(a.jsx)(Se.a,{to:"/"}):Object(a.jsxs)("div",{className:"password_reset",children:[Object(a.jsx)("header",{className:"passowrd_reset_header",children:Object(a.jsx)(ye.b,{to:"/login",children:Object(a.jsx)(Je.a,{id:"password_reset_back",children:Object(a.jsx)(Me.a,{style:{fontSize:"30px"}})})})}),Object(a.jsxs)("div",{className:"password_reset_content",children:[Object(a.jsx)("h1",{children:"Request Password Reset"}),Object(a.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.reset_password(p),c(!0)}(t)},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{className:"password_reset_input",type:"email",placeholder:"Email",name:"email",value:p,onChange:function(e){return function(e){return u(Object(d.a)(Object(d.a)({},l),{},Object(Ue.a)({},e.target.name,e.target.value)))}(e)},required:!0})}),Object(a.jsx)("button",{className:"password_reset_button",type:"submit",children:"Reset Password"})]})]})]})}))),Ye=(n(232),Object(l.b)((function(e,t){return{uid:t.match.params.uid,token:t.match.params.token}}),(function(e){return{reset_password_confirm:function(t,n,a,r){return e(function(e,t,n,a){return function(){var r=Object(ke.a)(Ce.a.mark((function r(c){var i,s;return Ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({uid:e,token:t,new_password:n,re_new_password:a}),console.log("PASSWORD_RESET_CONFIRM"),r.prev=3,r.next=6,Ie.a.post("".concat("http://127.0.0.1:8000","/auth/users/reset_password_confirm/"),s,i);case 6:c({type:O}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(3),c({type:_,payload:r.t0.response.request.response}),c({type:ie,payload:r.t0.response.request.response});case 13:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))}}}))((function(e){var t=Object(i.useState)(!1),n=Object(Le.a)(t,2),r=n[0],c=n[1],s=Object(i.useState)({new_password:"",re_new_password:""}),o=Object(Le.a)(s,2),l=o[0],u=o[1];console.log("token::",e.token);var p=l.new_password,j=l.re_new_password,m=function(e){return u(Object(d.a)(Object(d.a)({},l),{},Object(Ue.a)({},e.target.name,e.target.value)))};return r?Object(a.jsx)(Se.a,{to:"/"}):Object(a.jsxs)("div",{className:"password_reset_confirm",children:[Object(a.jsx)("header",{className:"passowrd_reset_confirm_header",children:Object(a.jsx)(ye.b,{to:"/login",children:Object(a.jsx)(Je.a,{id:"password_reset_confirm_back",children:Object(a.jsx)(Me.a,{style:{fontSize:"30px"}})})})}),Object(a.jsxs)("div",{className:"password_reset_confirm_content",children:[Object(a.jsx)("h1",{children:"Request Password Reset"}),Object(a.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var n=e.uid,a=e.token;e.reset_password_confirm(n,a,p,j),c(!0)}(t)},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{className:"password_reset_confirm_input",type:"password",placeholder:"New Pasword",name:"new_password",value:p,onChange:function(e){return m(e)},required:!0})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{className:"password_reset_confirm_input",type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:j,onChange:function(e){return m(e)},required:!0})}),Object(a.jsx)("button",{className:"password_reset_confirm_button",type:"submit",children:"Confirm Password Reset "})]})]})]})}))),Ke=n(140),Ze=n.n(Ke),Qe=(n(235),n(236),n(141)),Xe=n.n(Qe),$e=n(142),et=n.n($e);var tt=function(e){return e.backButton,Object(Se.g)(),Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)(ye.b,{to:"/setting",children:Object(a.jsx)(Je.a,{id:"header_icon",children:Object(a.jsx)(Xe.a,{fontSize:"large"})})}),Object(a.jsx)(ye.b,{to:"/swipe",children:Object(a.jsx)(Je.a,{id:"header_logo",children:Object(a.jsx)(De.a,{style:{fontSize:50}})})}),Object(a.jsx)(ye.b,{to:"/chatpanel",children:Object(a.jsx)(Je.a,{id:"header_icon",children:Object(a.jsx)(et.a,{fontSize:"large"})})})]})},nt=(n(237),n(144)),at=n.n(nt),rt=n(143),ct=n.n(rt),it=n(145),st=n.n(it);var ot=function(e){return Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsx)(Je.a,{id:"swipeButtons_nope",onClick:e.swipe_left,children:Object(a.jsx)(ct.a,{fontSize:"large"})}),Object(a.jsx)(Je.a,{id:"swipeButtons_repeat",children:Object(a.jsx)(at.a,{fontSize:"large"})}),Object(a.jsx)(Je.a,{id:"swipeButtons_like",onClick:e.swipe_right,children:Object(a.jsx)(st.a,{fontSize:"large"})})]})},lt=n(316),dt=n(325),ut=n(323),pt=n(293),jt=n(60),mt=n(328),bt=n(320),ht=n(318),ft=n(71),gt=n.n(ft),Ot=n(317),_t=n(319),xt=n(321),vt=n(322),yt=n(8),St=n(51),wt=n.n(St),Ct=n(45),kt=n.n(Ct),Nt=n(46),It=n.n(Nt),Et=n(59),At=n.n(Et),Tt=(n(98),n(76),Object(lt.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:475,display:"block",maxWidth:400,overflow:"hidden",width:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})));var Rt=Object(l.b)((function(e,t){return{contact_id:e.contact_reducer.contact_id,data:t.data,onClose:t.onClose}}),(function(e){return{send_first_message:function(t,n){return e(function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){var r,c,i,s,o,l,d;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={headers:{"Content-Type":"application/json"}},console.log("send_first_message"),c={contact:t,content:e},n.next=6,Ie.a.post("".concat("http://127.0.0.1:8000","/chat-api/message/create/"),c,r);case 6:return i=n.sent,console.log(JSON.stringify(i)),s=i.data.id,o=localStorage.getItem("latest_chat_id"),l={messages:[s]},n.next=13,Ie.a.put("".concat("http://127.0.0.1:8000","/chat-api/chat/detail/").concat(o,"/"),l,r);case 13:d=n.sent,a({type:ee,payload:d.data}),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(0),a({type:te,payload:n.t0}),a({type:ie,payload:n.t0});case 21:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=Tt(),n=s.a.useState(!1),r=Object(Le.a)(n,2),c=r[0],o=r[1],l=Object(i.useState)(""),d=Object(Le.a)(l,2),u=d[0],p=d[1],j=function(){o(!c)},m=Object(jt.a)(),b=s.a.useState(0),h=Object(Le.a)(b,2),f=h[0],g=h[1],O=e.data.images.length>0?e.data.images.length:1;return Object(a.jsxs)(Ot.a,{id:"card_root",children:[Object(a.jsxs)("div",{id:"card_imagebox",style:{position:"relative"},children:[Object(a.jsx)(At.a,{axis:"rtl"===m.direction?"x-reverse":"x",index:f,onChangeIndex:function(e){g(e)},enableMouseEvents:!0,children:void 0===e.images?e.data.images.map((function(n,r){return Object(a.jsx)("div",{children:Math.abs(f-r)<=2?Object(a.jsx)("img",{className:t.img,src:n}):null},e.data.name)})):e.data.images.map((function(n,r){return Object(a.jsx)("div",{children:Math.abs(f-r)<=2?Object(a.jsx)("img",{className:t.img,src:n.image}):null},e.id)}))}),Object(a.jsx)("div",{id:"card_stepper",children:Object(a.jsx)(mt.a,{variant:"dots",steps:O>1?O:0,position:"static",activeStep:f,nextButton:Object(a.jsx)(ht.a,{size:"small",onClick:function(){g((function(e){return e+1}))},disabled:f===O-1,id:"outline",children:"rtl"===m.direction?Object(a.jsx)(kt.a,{}):Object(a.jsx)(It.a,{})}),backButton:Object(a.jsx)(ht.a,{size:"small",onClick:function(){g((function(e){return e-1}))},disabled:0===f,id:"outline",children:"rtl"===m.direction?Object(a.jsx)(It.a,{}):Object(a.jsx)(kt.a,{})})})}),Object(a.jsx)("h1",{children:"New Match!"})]}),Object(a.jsx)(Je.a,{id:"match_icon",onClick:function(){return e.onClose(!1)},children:Object(a.jsx)(gt.a,{style:{fontSize:"large"}})}),Object(a.jsx)(_t.a,{children:Object(a.jsx)(bt.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.name})}),Object(a.jsxs)(bt.a,{style:{marginLeft:"10px"},children:["native language: ",e.data.native_lan,Object(a.jsx)("br",{}),"want to learn: ",e.data.foreign_lan,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)(xt.a,{disableSpacing:!0,children:Object(a.jsx)(Je.a,{className:Object(yt.a)(t.expand,Object(Ue.a)({},t.expandOpen,c)),onClick:j,"aria-expanded":c,"aria-label":"show more",id:"outline",children:Object(a.jsx)(wt.a,{onClick:j,id:"outline"})})}),Object(a.jsx)(vt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(a.jsxs)(_t.a,{children:[Object(a.jsxs)(bt.a,{paragraph:!0,children:[function(){return null!=e.data.freeday?Object(a.jsxs)(a.Fragment,{children:["freeday: ",e.data.freeday]}):null},"  ",function(){return null!=e.data.time_start||null!=e.data.time_end?Object(a.jsxs)(a.Fragment,{children:[e.data.time_start,"~",e.data.time_end]}):Object(a.jsx)(a.Fragment,{})}]}),Object(a.jsx)(bt.a,{className:"card_intro",paragraph:!0,children:e.intro})]})}),Object(a.jsxs)("form",{className:"match_form",onSubmit:function(t){t.preventDefault(),e.send_first_message(u,e.contact_id),p(""),e.onClose(!1)},children:[Object(a.jsx)("input",{type:"text",placeholder:"write the first message!",className:"match_input",onChange:function(e){p(e.target.value)}}),Object(a.jsx)("button",{className:"match_submit",type:"submit",children:"SEND"})]})]})})),Dt=Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5]}}}));var Ft=function(e){var t=Dt();return Object(a.jsx)("div",{children:Object(a.jsx)(dt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.popup,closeAfterTransition:!0,BackdropComponent:ut.a,BackdropProps:{timeout:500},children:Object(a.jsx)(pt.a,{in:e.popup,children:Object(a.jsx)("div",{className:t.paper,children:Object(a.jsx)(Rt,{data:e.person,onClose:e.onClose})})})})})},Ut=Object(lt.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:475,display:"block",maxWidth:400,overflow:"hidden",width:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var Lt=function(e){var t=Ut(),n=s.a.useState(!1),r=Object(Le.a)(n,2),c=r[0],i=r[1],o=function(){i(!c)},l=Object(jt.a)(),d=s.a.useState(0),u=Object(Le.a)(d,2),p=u[0],j=u[1],m=null!=e.data.images&&e.data.images.length>0?e.data.images.length:1;return Object(a.jsxs)(Ot.a,{id:"card_root",children:[Object(a.jsxs)("div",{id:"card_imagebox",style:{position:"relative"},children:[Object(a.jsx)(At.a,{axis:"rtl"===l.direction?"x-reverse":"x",index:p,onChangeIndex:function(e){j(e)},enableMouseEvents:!0,children:void 0===e.images?e.data.images.map((function(n,r){return Object(a.jsx)("div",{children:Math.abs(p-r)<=2?Object(a.jsx)("img",{className:t.img,src:n}):null},e.data.name)})):e.images.map((function(n,r){return Object(a.jsx)("div",{children:Math.abs(p-r)<=2?Object(a.jsx)("img",{className:t.img,src:n.image}):null},e.id)}))}),Object(a.jsx)("div",{id:"card_stepper",children:Object(a.jsx)(mt.a,{variant:"dots",steps:m>1?m:0,position:"static",activeStep:p,nextButton:Object(a.jsx)(ht.a,{size:"small",onClick:function(){j((function(e){return e+1}))},disabled:p===m-1,id:"outline",children:"rtl"===l.direction?Object(a.jsx)(kt.a,{}):Object(a.jsx)(It.a,{})}),backButton:Object(a.jsx)(ht.a,{size:"small",onClick:function(){j((function(e){return e-1}))},disabled:0===p,id:"outline",children:"rtl"===l.direction?Object(a.jsx)(It.a,{}):Object(a.jsx)(kt.a,{})})})})]}),Object(a.jsx)(_t.a,{children:Object(a.jsx)(bt.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.name})}),Object(a.jsxs)(bt.a,{style:{marginLeft:"10px"},children:["native language: ",e.data.native_lan,Object(a.jsx)("br",{}),"want to learn: ",e.data.foreign_lan,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)(xt.a,{disableSpacing:!0,children:Object(a.jsx)(Je.a,{className:Object(yt.a)(t.expand,Object(Ue.a)({},t.expandOpen,c)),onClick:o,"aria-expanded":c,"aria-label":"show more",id:"outline",children:Object(a.jsx)(wt.a,{onClick:o,id:"outline"})})}),Object(a.jsx)(vt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(a.jsxs)(_t.a,{children:[Object(a.jsxs)(bt.a,{paragraph:!0,children:[function(){return null!=e.data.freeday?Object(a.jsxs)(a.Fragment,{children:["freeday: ",e.data.freeday]}):null},"  ",function(){return null!=e.data.time_start||null!=e.data.time_end?Object(a.jsxs)(a.Fragment,{children:[e.data.time_start,"~",e.data.time_end]}):Object(a.jsx)(a.Fragment,{})}]}),Object(a.jsx)(bt.a,{className:"card_intro",paragraph:!0,children:e.intro})]})})]})};var Pt=Object(l.b)((function(e){return{id:e.auth_reducer.id,swiped:e.swipe_reducer.swiped,liked:e.swipe_reducer.liked,swipe_id:e.swipe_reducer.swipe_id,cards:e.swipe_reducer.cards}}),(function(e){return{Swipe:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ke.a)(Ce.a.mark((function a(r){var c,i,s;return Ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c={headers:{"Content-Type":"application/json"}},i=null,i=null===n?JSON.stringify({swiped:t}):JSON.stringify({swiped:t,liked:n}),a.next=6,Ie.a.put("".concat("http://127.0.0.1:8000","/swipe/update/").concat(e,"/"),i,c);case 6:s=a.sent,console.log(s.data),r({type:G,payload:s.data}),a.next=13;break;case 11:a.prev=11,a.t0=a.catch(0);case 13:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},chat_create:function(t,n){return e(function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){var r,c,i;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e){n.next=17;break}return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({participants:[e,t]}),n.prev=3,n.next=6,Ie.a.post("".concat("http://127.0.0.1:8000","/chat-api/chat/create/"),c,r);case 6:i=n.sent,console.log(i.data),a({type:H,payload:i.data}),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),a({type:Y,payload:n.t0.response.request.response}),a({type:ie,payload:n.t0.response.request.response});case 15:n.next=19;break;case 17:a({type:Y,payload:"An error occured. please try again."}),a({type:ie,payload:"An error occured. please try again."});case 19:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},add_friend:function(t,n){return e(function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){var r,c,i;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({friend:t}),n.next=5,Ie.a.put("".concat("http://127.0.0.1:8000","/chat-api/contact/update/").concat(e,"/"),c,r);case 5:i=n.sent,a({type:"CONTACT_UPDATE_SUCCESS",payload:i.data}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:"CONTACT_UPDATE_FAIL",payload:n.t0.response.request.response}),a({type:ie,payload:n.t0.response.request.response});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},receive_swipe:function(t){return e(qe(t))},card_receive:function(){return e(function(){var e=Object(ke.a)(Ce.a.mark((function e(t){var n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("card_receive is called"),e.prev=1,e.next=4,Ie.a.get("".concat("http://127.0.0.1:8000","/profile/list/"));case 4:n=e.sent,console.log(JSON.stringify(n.data)),t({type:W,payload:n.data}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:ie,payload:e.t0.response}),t({type:V,payload:e.t0.response});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=Object(i.useState)([]),n=Object(Le.a)(t,2),r=n[0],c=n[1],o=Object(i.useState)(),l=Object(Le.a)(o,2),d=(l[0],l[1]),u=Object(i.useState)(!1),p=Object(Le.a)(u,2),j=p[0],m=p[1],b=Object(i.useState)(),h=Object(Le.a)(b,2),f=h[0],g=h[1],O=Object(i.useState)(!0),_=Object(Le.a)(O,2),x=_[0],v=(_[1],[]);Object(i.useEffect)((function(){e.card_receive(),e.receive_swipe(e.id),c(e.cards)}),[]);var y=r,S=Object(i.useMemo)((function(){return null!=r?Array(r.length).fill(0).map((function(e){return s.a.createRef()}),[]):null})),w=function(){var t=Object(ke.a)(Ce.a.mark((function t(n,a){var r;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("name:",a.name),d(n),v.push(a.name),"right"!==n){t.next=12;break}return e.Swipe(e.swipe_id,a.user,a.user),t.next=7,Ie.a.get("".concat("http://127.0.0.1:8000","/swipe/detail/").concat(a.user,"/"));case 7:r=t.sent,console.log(JSON.stringify(r)),r.data.liked.includes(Number(e.id))&&(console.log("MATCH"),g(a),m(!0),e.chat_create(e.id,a.user),e.add_friend(e.id,a.user)),t.next=13;break;case 12:e.Swipe(e.swipe_id,a.user,null);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(e){var t=r.filter((function(e){return!v.includes(e.name)}));if(t.length){var n=t[t.length-1],a=r.map((function(e){return e.name})).indexOf(n.name);S[a].current.swipe(e),w(e,n)}};return null!==e.swiped&&void 0!==e.swiped&&e.swiped.length>0&&(v=Object(he.a)(e.swiped)),Object(a.jsxs)("div",{children:[Object(a.jsx)(tt,{}),Object(a.jsxs)("div",{className:"cards",children:[null!=r&&r.length>0?r.map((function(t,n){return t.user===e.id||!0===e.swiped.includes(t.user)?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Ze.a,{ref:S[n],className:"swipe",onSwipe:function(e){return w(e,t)},onCardLeftScreen:function(){return e=t.name,console.log(e+" left the screen!"),y=y.filter((function(t){return t.name!==e})),void c(y);var e},preventSwipe:["up","down"],children:Object(a.jsx)(Lt,{data:t})},t.name)})})):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)("div",{style:{marginLeft:"15px",marginTop:"100px",textAlign:"center"},children:x?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be.Ripple,{color:"skyblue",size:"200px",style:{zIndex:"-1"}}),Object(a.jsxs)("h1",{style:{color:"#2c7f80"},children:["You swiped all cards.",Object(a.jsx)("br",{}),"Please wait until new accouts will be created."]})]}):Object(a.jsx)(a.Fragment,{})}),Object(a.jsx)(Ft,{person:f,onClose:function(){m(!1)},popup:j})]}),Object(a.jsx)(ot,{swipe_left:function(){return C("left")},swipe_right:function(){return C("right")}})]})})),Mt=(n(255),Object(lt.a)((function(e){return{expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})));Object(l.b)((function(e){return{person:e.profile_reducer,name:e.profile_reducer.name,gender:e.profile_reducer.gender,age:e.profile_reducer.age,native_lan:e.profile_reducer.native_lan,foreign_lan:e.profile_reducer.foreign_lan,image:e.profile_reducer.image,location:e.profile_reducer.location,time_start:e.profile_reducer.time_start,time_end:e.profile_reducer.time_end,intro:e.profile_reducer.intro,freeday:e.profile_reducer.freeday}}),null)((function(e){Mt();var t=s.a.useState(!1),n=Object(Le.a)(t,2);return n[0],n[1],console.log(e.person),Object(a.jsx)(Lt,{data:e.person})})),n(256);var Jt=Object(l.b)((function(e){return{person:e.profile_reducer,images:e.image_reducer.images}}),(function(e){return{logout:function(){return e((function(e){e({type:x})}))}}}))((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(tt,{}),Object(a.jsxs)("div",{id:"setting_content",style:{justifyContent:"space-evenly"},children:[Object(a.jsx)(Lt,{data:e.person,images:e.images}),Object(a.jsxs)("div",{className:"Button",children:[Object(a.jsx)(ye.b,{to:"/edit",children:Object(a.jsx)("button",{className:"setting_button1",onfocus:"this.blur();",children:Object(a.jsx)("span",{children:"Edit Your Profile"})})}),Object(a.jsx)(ye.b,{to:"/",children:Object(a.jsx)("button",{className:"setting_button1",onfocus:"this.blur();",onClick:e.logout,children:Object(a.jsx)("span",{children:"Log Out"})})}),Object(a.jsx)("button",{className:"setting_button3",onfocus:"this.blur();",children:Object(a.jsx)("span",{children:"Delete Your Account"})})]})]})]})})),qt=n(152),zt=n.n(qt),Bt=n(105),Gt=n(146),Wt=n.n(Gt),Vt=n(148),Ht=n(87),Yt=n(147),Kt=n.n(Yt),Zt=(n(257),n(258),Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,maxWidth:"700px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})));var Qt=Object(l.b)((function(e){return{id:e.auth_reducer.id,profile_id:e.profile_reducer.profile_id}}),(function(e){return{image_create:function(t,n,a,r,c,i,s){return e(function(e,t,n,a,r,c,i){return function(){var e=Object(ke.a)(Ce.a.mark((function e(s){var o,l,d;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},(l=new FormData).append("image",n),l.append("x",a),l.append("y",r),l.append("width",c),l.append("height",i),l.append("album",t),e.next=11,Ie.a.post("".concat("http://127.0.0.1:8000","/profile/image/"),l,o);case 11:d=e.sent,s({type:D,payload:d.data}),s(ze(t)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),void 0===e.t0.response?(s({type:D}),s(ze(t))):(s({type:F}),s({type:ie,paylaod:e.t0.response}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()}(0,n,a,r,c,i,s))}}}))((function(e){var t=Zt(),n=s.a.useState(e.open),r=Object(Le.a)(n,2),c=r[0],o=r[1],l=Object(i.useState)({width:0,height:0}),d=Object(Le.a)(l,2),u=d[0],p=d[1];Object(i.useEffect)((function(){var t=new Image;t.src=e.url,t.onload=function(){p({width:t.width,height:t.height})}}),[]);var j=Object(i.useState)({aspect:14/19}),m=Object(Le.a)(j,2),b=m[0],h=m[1];return Object(a.jsx)("div",{className:"crop",children:Object(a.jsx)(dt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:c,closeAfterTransition:!0,BackdropComponent:ut.a,BackdropProps:{timeout:500},children:Object(a.jsx)(pt.a,{in:c,children:Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(Kt.a,{src:e.url,crop:b,onChange:function(e){return h(e)}}),Object(a.jsxs)("div",{className:"crop_button",children:[Object(a.jsx)("button",{className:"cancel_button",onClick:function(){e.parent_popup(!1),o(!1)},id:"outline",children:"Cancel"}),Object(a.jsx)("button",{className:"upload_button",onClick:function(){e.parent_popup(!1);var t=b.x,n=b.y,a=b.width,r=b.height;u.height>600?(t=b.x*(u.height/600),n=b.y*(u.height/600),a=b.width*(u.height/600),r=b.height*(u.height/600)):u.weight>700&&(t=b.x*(u.height/700),n=b.y*(u.height/700),a=b.width*(u.height/700),r=b.height*(u.height/700)),console.log(t,n,a,r),e.image_create(e.id,e.profile_id,e.image,t,n,a,r),o(!1)},id:"outline",children:"Upload"})]})]})})})})})),Xt=(n(259),Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"500px",height:"200px",textAlign:"center"}}})));var $t=Object(l.b)((function(e){return{images:e.image_reducer.images,profile_id:e.profile_reducer.profile_id}}),(function(e){return{delete_image:function(t,n){return e(function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ie.a.delete("".concat("http://127.0.0.1:8000","/profile/image/").concat(t,"/"));case 3:a({type:P}),a(ze(e)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),a({type:M}),a({type:ie,payload:n.t0.response});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){console.log(e.deleting_image),console.log(e.i);var t=Xt(),n=s.a.useState(e.open),r=Object(Le.a)(n,2),c=r[0],i=r[1],o=function(){i(!1),e.parent_popup(!1)};return Object(a.jsx)("div",{children:Object(a.jsx)(dt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:c,onClose:o,closeAfterTransition:!0,BackdropComponent:ut.a,BackdropProps:{timeout:500},children:Object(a.jsx)(pt.a,{in:c,children:Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)("h1",{style:{fontSize:"30px"},children:"Are you sure you want to delete this picture?"}),Object(a.jsxs)("div",{className:"crop_button",children:[Object(a.jsx)("button",{className:"cancel_button",onClick:o,id:"outline",children:"Cancel"}),Object(a.jsx)("button",{className:"upload_button",onClick:function(){var t;for(i(!1),e.parent_popup(!1),t=0;t<e.images.length;t++)e.images[t].image===e.deleting_image&&e.delete_image(e.profile_id,e.images[t].id)},id:"outline",children:"Delete"})]})]})})})})})),en=n(151),tn=n.n(en),nn=n(150),an=n.n(nn),rn=(n(260),function(e,t,n,a,r,c){return function(i){return t&&i===n?{x:a%3*170+r,y:220*(a>2?1:0)+c,scale:1.1,zIndex:"1",shadow:15,immediate:function(e){return"y"===e||"zIndex"===e}}:{x:e.indexOf(i)%3*170,y:220*(e.indexOf(i)>2?1:0),scale:1,zIndex:"0",shadow:1,immediate:!1}}});var cn=function(e){var t=e.images,n=Object(i.useRef)(t.map((function(e,t){return t}))),r=Array.from({length:6-t.length},(function(e,t){return t})),c=Object(i.useState)(),s=Object(Le.a)(c,2),o=s[0],l=s[1],u=Object(i.useState)(),p=Object(Le.a)(u,2),j=p[0],m=p[1],b=Object(i.useState)(!1),h=Object(Le.a)(b,2),f=h[0],g=h[1],O=Object(i.useState)(!1),_=Object(Le.a)(O,2),x=_[0],v=_[1],y=Object(i.useState)(),S=Object(Le.a)(y,2),w=S[0],C=S[1],k=Object(Ht.c)(t.length,rn(n.current)),N=Object(Le.a)(k,2),I=N[0],E=N[1],A=function(e){console.log(e.target.files[0]),m(URL.createObjectURL(e.target.files[0])),l(e.target.files[0]),g(!0)},T=Object(Vt.a)((function(e){var a,r,c=Object(Le.a)(e.args,1)[0],i=e.down,s=Object(Le.a)(e.movement,2),o=s[0],l=s[1],d=Object(Le.a)(e.delta,2),u=(d[0],d[1],n.current.indexOf(c));t.length>3?(a=2,r=3):t.length>2?(a=1,r=3):t.length>1?(a=1,r=2):(a=1,r=1),console.log(u),console.log(r);var p,j=u%r,m=u>2?1:0,b=Object(Bt.a)(Math.round((200*j+o)/200),0,r-1),h=Object(Bt.a)(Math.round((100*m+l)/100),0,a-1);p=2===b&&1===h?5:1===b&&1===h?4:0===b&&1===h?3:2===b&&0===h?2:1===b&&0===h?1:0;var f=Wt()(n.current,u,p);E(rn(f,i,c,u,o,l)),i||(n.current=f)}));return Object(a.jsxs)("div",{className:"images_box",children:[f?Object(a.jsx)(Qt,{open:f,image:o,url:j,parent_popup:g}):Object(a.jsx)(a.Fragment,{}),x?Object(a.jsx)($t,{open:x,parent_popup:v,deleting_image:w}):Object(a.jsx)(a.Fragment,{}),I.map((function(e,n){var r=e.zIndex,c=e.shadow,i=e.x,s=e.y,o=e.scale;return Object(a.jsx)(Ht.a.div,Object(d.a)(Object(d.a)({},T(n)),{},{style:{zIndex:r,boxShadow:c.interpolate((function(e){return"rgba(0, 0, 0, 0.15) 0px ".concat(e,"px ").concat(2*e,"px 0px")})),transform:Object(Ht.b)([i,s,o],(function(e,t,n){return"translate3d(".concat(e,"px,").concat(t,"px,0px) scale(").concat(n,")")})),backgroundImage:"url(".concat(t[n].image,")"),backgroundSize:"cover"},children:Object(a.jsx)(an.a,{onClick:function(){return function(e){v(!0),C(t[e].image)}(n)},className:"delete_image"})}),n)})),r.map((function(e){return Object(a.jsxs)("div",{className:"new_image",style:{top:e<3?"230px":"10px",right:e%3===0?"-170px":(e-1)%3===0?"0px":"170px"},children:[Object(a.jsx)("label",{for:"file-upload",class:"custom-file-upload",children:Object(a.jsx)(tn.a,{className:"add_image"})}),Object(a.jsx)("input",{type:"file",name:"image",accept:"image/png, image/jpeg",size:"60",id:"file-upload",onChange:A})]})}))]})};n(261);var sn=Object(l.b)((function(e){return{profile_id:e.profile_reducer.profile_id,name:e.profile_reducer.name,gender:e.profile_reducer.gender,age:e.profile_reducer.age,native_lan:e.profile_reducer.native_lan,foreign_lan:e.profile_reducer.foreign_lan,images:e.image_reducer.images,location:e.profile_reducer.location,time_start:e.profile_reducer.time_start,time_end:e.profile_reducer.time_end,intro:e.profile_reducer.intro,freeday:e.profile_reducer.freeday}}),(function(e){return{update:function(t,n,a,r,c,i,s,o,l,d,u,p){return e(function(e,t,n,a,r,c,i,s,o,l,d){return function(){var u=Object(ke.a)(Ce.a.mark((function u(p){var j,m,b;return Ce.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("time:",typeof s),u.prev=1,j={headers:{"Content-Type":"application/json"}},m=JSON.stringify({name:t,age:n,gender:a,native_lan:r,foreign_lan:c,location:i,time_start:s,time_end:o,intro:l,freeday:d}),u.next=6,Ie.a.put("".concat("http://127.0.0.1:8000","/profile/update/").concat(e,"/"),m,j);case 6:b=u.sent,p({type:E,payload:b.data}),u.next=14;break;case 10:u.prev=10,u.t0=u.catch(1),p({type:A,payload:u.t0.response.request.response}),p({type:ie,payload:u.t0.response.request.response});case 14:case"end":return u.stop()}}),u,null,[[1,10]])})));return function(e){return u.apply(this,arguments)}}()}(t,n,a,r,c,i,s,o,l,d,u))}}}))((function(e){console.log(e.images);var t=Object(i.useState)(!1),n=Object(Le.a)(t,2),r=n[0],c=n[1],s=Object(i.useState)({profile_id:e.profile_id,name:e.name,gender:e.gender,age:e.age,native_lan:e.native_lan,foreign_lan:e.foreign_lan,location:e.location,time_start:e.time_start,time_end:e.time_end,intro:e.intro,freeday:e.freeday}),o=Object(Le.a)(s,2),l=o[0],u=o[1],p=["Arabic","Bengali","Burmese","Chinese","English","French","German","Gujarati","Hindi","Italian","Japanese","Kannada","Korean","Malayalam","Marathi","Oriya","Panjabi","Persian","Polish","Portuguese","Russian","Spanish","Tamil","Telugu","Thai","Turkish","Ukrainian","Urdu","Vietnamese"],j=l.profile_id,m=l.name,b=l.age,h=l.gender,f=l.native_lan,g=l.foreign_lan,O=l.location,_=l.time_start,x=l.time_end,v=l.intro,y=l.freeday,S=function(e){return u(Object(d.a)(Object(d.a)({},l),{},Object(Ue.a)({},e.target.name,e.target.value)))};return r?Object(a.jsx)(Se.a,{to:"/setting"}):Object(a.jsxs)("div",{className:"edit",children:[Object(a.jsx)("div",{className:"edit_header",children:Object(a.jsx)(ye.b,{to:"/setting",children:Object(a.jsx)(Je.a,{style:{outline:"none"},children:Object(a.jsx)(zt.a,{})})})}),Object(a.jsx)("div",{className:"edit_setting",children:Object(a.jsxs)("form",{className:"edit_form",onSubmit:function(t){t.preventDefault(),e.update(j,m,b,h,f,g,O,_,x,v,y),c(!0)},encType:"multipart/form-data",children:[Object(a.jsxs)("div",{className:"edit_container",children:[Object(a.jsx)("h1",{children:"Your Profile"}),Object(a.jsx)(cn,{images:e.images}),Object(a.jsx)("input",{placeholder:"name",type:"text",name:"name",value:m,className:"edit_input",id:"edit_name",onChange:S}),Object(a.jsx)("input",{placeholder:"age",type:"number",name:"age",value:parseInt(b),className:"edit_input",onChange:S}),Object(a.jsxs)("select",{className:"edit_select",name:"gender",onChange:S,children:[Object(a.jsx)("option",{hidden:!0,children:"gender"}),["Male","Female","Other"].map((function(e){return e===h?Object(a.jsx)("option",{selected:!0,value:e,children:e}):Object(a.jsx)("option",{value:e,children:e})}))]}),Object(a.jsxs)("select",{className:"edit_select",name:"native_lan",onChange:S,required:!0,children:[Object(a.jsx)("option",{hidden:!0,children:"You speak..."}),p.map((function(e){return e===f?Object(a.jsx)("option",{selected:!0,value:e,children:e}):Object(a.jsx)("option",{value:e,children:e})}))]}),Object(a.jsxs)("select",{className:"edit_select",name:"foreign_lan",onChange:S,required:!0,children:[Object(a.jsx)("option",{hidden:!0,children:"You want to learn ..."}),p.map((function(e){return e===g?Object(a.jsx)("option",{selected:!0,value:e,children:e}):Object(a.jsx)("option",{value:e,children:e})}))]}),Object(a.jsxs)("select",{className:"edit_select",name:"freeday",onChange:S,children:[Object(a.jsx)("option",{hidden:!0,children:"You are free on ..."}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((function(e){return e===y?Object(a.jsx)("option",{selected:!0,value:e,children:e}):Object(a.jsx)("option",{value:e,children:e})}))]}),Object(a.jsxs)("div",{className:"edit_time",children:[Object(a.jsx)("input",{type:"time",className:"edit_input_time",name:"time_start",value:_,onChange:S}),"~",Object(a.jsx)("input",{type:"time",className:"edit_input_time",name:"time_end",value:x,onChange:S})]}),Object(a.jsx)("textarea",{placeholder:"Write your profile message here!",name:"intro",value:v,type:"text",className:"edit_input",onChange:S})]}),Object(a.jsx)("button",{className:"edit_button",type:"submit",children:Object(a.jsx)("span",{children:"SAVE"})})]})})]})})),on=n(28),ln=n(32),dn=function(){function e(){Object(on.a)(this,e),this.callbacks={},this.socketRef=null}return Object(ln.a)(e,null,[{key:"getInstance",value:function(){return e.instace||(e.instance=new e),e.instance}}]),Object(ln.a)(e,[{key:"connect",value:function(e){var t=this,n="https:"===window.location.protocol?"wss":"ws",a=window.location.host,r="".concat(n,"://").concat(a,"/ws/chat/").concat(e,"/");this.socketRef=new WebSocket(r),this.socketRef.onopen=function(){console.log("open")},this.socketNewMessage(JSON.stringify({command:"messages"})),this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onclose=function(){console.log("close"),t.connect()},this.socketRef.onerror=function(e){console.log("error in Websocket::",e)}}},{key:"disconnect",value:function(){this.socketRef.close()}},{key:"socketNewMessage",value:function(e){var t=JSON.parse(e),n=t.command;console.log("Parsedata in Websocket::",t),0!==Object.keys(this.callbacks).length&&("messages"===n&&(t.messages?this.callbacks[n](t.messages):t.files&&this.callbacks[n](t.files)),"new_message"===n&&(t.message?this.callbacks[n](t.message):t.file&&this.callbacks[n](t.file)))}},{key:"fetchMessages",value:function(e,t){this.sendMessage({command:"fetch_messages",username:e,ChatID:t})}},{key:"newChatMessage",value:function(e){console.log("newChatMessage::",e),this.sendMessage({command:"new_message",from:e.from,message:e.content,ChatID:e.ChatID,files:e.files})}},{key:"addCallbacks",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:"sendMessage",value:function(e){console.log("data in sendMessage",e);try{this.socketRef.send(JSON.stringify(Object(d.a)({},e)))}catch(t){console.log(t.message)}}},{key:"state",value:function(){return this.socketRef.readyState}}]),e}();dn.instance=null;var un=dn.getInstance(),pn=n(327),jn=n(154),mn=n.n(jn),bn=n(155),hn=n.n(bn),fn=n(324),gn=n(86),On=n.n(gn),_n=n(72),xn=n.n(_n);n(262);function vn(e,t){setTimeout((function(){if(1===t.state())return console.log("connection is secure"),void e();console.log("waiting for connection ...."),vn(e,t)}),100)}var yn=function(e,t,n,a,r){console.log("SEND MESSAGEHANDLER");var c=a.concat(r);console.log("files_list",n);var i={from:t.name,content:n,ChatID:t.ChatID,files:c};e.newChatMessage(i)};function Sn(e,t){vn((function(){t.addCallbacks(e.fetch_messages,e.new_message),t.fetchMessages(e.name,e.ChatID)}),t)}var wn=Object(lt.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:475,display:"block",maxWidth:400,overflow:"hidden",width:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var Cn=function(e){var t=wn(),n=s.a.useState(!1),r=Object(Le.a)(n,2),c=r[0],i=r[1],o=function(){i(!c)},l=Object(jt.a)(),d=s.a.useState(0),u=Object(Le.a)(d,2),p=u[0],j=u[1],m=e.data.images.length>0?e.data.images.length:1;return Object(a.jsxs)(Ot.a,{id:"card_root",children:[Object(a.jsxs)("div",{id:"card_imagebox",children:[Object(a.jsx)(At.a,{axis:"rtl"===l.direction?"x-reverse":"x",index:p,onChangeIndex:function(e){j(e)},enableMouseEvents:!0,children:void 0===e.images?e.data.images.map((function(n,r){return Object(a.jsx)("div",{children:Math.abs(p-r)<=2?Object(a.jsx)("img",{className:t.img,src:n}):null},e.data.name)})):e.images.map((function(n,r){return Object(a.jsx)("div",{children:Math.abs(p-r)<=2?Object(a.jsx)("img",{className:t.img,src:n.image}):null},e.id)}))}),Object(a.jsx)(Je.a,{id:"match_icon",onHover:function(){return e.onClose(!1)},children:Object(a.jsx)(gt.a,{style:{fontSize:"large"},onHover:function(){return console.log("clicked")}})}),Object(a.jsx)("div",{id:"card_stepper",children:Object(a.jsx)(mt.a,{variant:"dots",steps:m>1?m:0,position:"static",activeStep:p,nextButton:Object(a.jsx)(ht.a,{size:"small",onClick:function(){j((function(e){return e+1}))},disabled:p===m-1,id:"outline",children:"rtl"===l.direction?Object(a.jsx)(kt.a,{}):Object(a.jsx)(It.a,{})}),backButton:Object(a.jsx)(ht.a,{size:"small",onClick:function(){j((function(e){return e-1}))},disabled:0===p,id:"outline",children:"rtl"===l.direction?Object(a.jsx)(It.a,{}):Object(a.jsx)(kt.a,{})})})})]}),Object(a.jsx)(Je.a,{id:"match_icon",onClick:function(){return e.onClose(!1)},children:Object(a.jsx)(gt.a,{style:{fontSize:"large"}})}),Object(a.jsx)(_t.a,{children:Object(a.jsx)(bt.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.name})}),Object(a.jsxs)(bt.a,{style:{marginLeft:"10px"},children:["native language: ",e.data.native_lan,Object(a.jsx)("br",{}),"want to learn: ",e.data.foreign_lan,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)(xt.a,{disableSpacing:!0,children:Object(a.jsx)(Je.a,{className:Object(yt.a)(t.expand,Object(Ue.a)({},t.expandOpen,c)),onClick:o,"aria-expanded":c,"aria-label":"show more",id:"outline",children:Object(a.jsx)(wt.a,{onClick:o,id:"outline"})})}),Object(a.jsx)(vt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(a.jsxs)(_t.a,{children:[Object(a.jsxs)(bt.a,{paragraph:!0,children:[function(){return null!=e.data.freeday?Object(a.jsxs)(a.Fragment,{children:["freeday: ",e.data.freeday]}):null},"  ",function(){return null!=e.data.time_start||null!=e.data.time_end?Object(a.jsxs)(a.Fragment,{children:[e.data.time_start,"~",e.data.time_end]}):Object(a.jsx)(a.Fragment,{})}]}),Object(a.jsx)(bt.a,{className:"card_intro",paragraph:!0,children:e.intro})]})})]})},kn=Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5]}}}));function Nn(e){var t=kn(),n=Object(i.useState)(),r=Object(Le.a)(n,2),c=r[0],s=r[1];return Object(i.useEffect)((function(){Ie.a.get("".concat("http://127.0.0.1:8000","/profile/friend/").concat(e.friend_profile_id,"/")).then((function(e){s(e.data)}))}),[]),Object(a.jsx)("div",{children:Object(a.jsx)(dt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.popup,closeAfterTransition:!0,BackdropComponent:ut.a,BackdropProps:{timeout:500},children:Object(a.jsx)(pt.a,{in:e.popup,children:Object(a.jsx)("div",{className:t.paper,children:Object(a.jsx)(Cn,{data:c,onClose:e.onClose})})})})})}function In(e){var t=(new Date).toLocaleString("en-GB",{timeZone:"Europe/London"}).split(","),n=Object(Le.a)(t,2),a=n[0],r=n[1],c=a.split("/"),i=Object(Le.a)(c,3),s=i[0],o=i[1],l=i[2],d=r.split(":"),u=Object(Le.a)(d,3),p=u[0],j=u[1];u[2];if("Start now"!==e){var m,b=e.split("T"),h=Object(Le.a)(b,2),f=h[0],g=h[1],O=f.split("-"),_=Object(Le.a)(O,3),x=_[0],v=_[1],y=_[2],S=g.split(":"),w=Object(Le.a)(S,3),C=w[0],k=w[1],N=(w[2],[s,o,l,p,j,x,v,y,C,k]);for(m=0;m<N.length;m++)N[m]=parseInt(N[m]);return s=N[0],o=N[1],l=N[2],p=N[3],j=N[4],x=N[5],v=N[6],y=N[7],C=N[8],k=N[9],l!==x?l-x===1?JSON.stringify(l-x)+"year ago":JSON.stringify(l-x)+"years ago":o!==v?o-v===1?JSON.stringify(o-v)+"month ago":JSON.stringify(o-v)+"months ago":s!==y?s-y===1?JSON.stringify(s-y)+"day ago":JSON.stringify(s-y)+"days ago":p!==C?p-C===1?JSON.stringify(p-C)+"hour ago":JSON.stringify(p-C)+"hours ago":j!==k?j-k===1?JSON.stringify(j-k)+"minute ago":JSON.stringify(j-k)+"minutes ago":"0 minute ago"}return""}function En(e,t){var n=e.concat(t);return n.sort((function(e,t){return new Date(e.timestamp.replace(" ","T"))-new Date(t.timestamp.replace(" ","T"))})),n}var An=n(153),Tn=n.n(An),Rn=n(326);var Dn=Object(l.b)((function(e,t){return{name:e.auth_reducer.name,ChatID:t.match.params.ChatID,friend:t.match.params.friend,friend_image:e.chat_reducer.friend_image,when_matched:e.chat_reducer.when_matched,friend_profile_id:e.chat_reducer.friend_profile_id,messages:e.chat_reducer.messages,files:e.chat_reducer.files,contents:En(e.chat_reducer.files,e.chat_reducer.messages)}}),(function(e){return{fetch_messages:function(t){return e((n=t,function(){var e=Object(ke.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0&&(n[0].content.includes("s3")?t({type:Q,payload:n}):t({type:K,payload:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n},new_message:function(t){return e((n=t,function(){var e=Object(ke.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[0].content.includes("s3")?t({type:X,payload:n}):t({type:Z,payload:n});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n}}}))((function(e){var t=Object(i.useState)(""),n=Object(Le.a)(t,2),r=n[0],c=n[1],s=Object(i.useState)(!1),o=Object(Le.a)(s,2),l=o[0],d=o[1],u=Object(i.useState)([]),p=Object(Le.a)(u,2),j=p[0],m=p[1],b=Object(i.useState)([]),h=Object(Le.a)(b,2),f=h[0],g=h[1],O=Object(i.useState)(""),_=Object(Le.a)(O,2),x=(_[0],_[1],Object(i.useState)([])),v=Object(Le.a)(x,2),y=v[0],S=v[1],w=Object(i.useState)(12),C=Object(Le.a)(w,2);function k(e,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){t(n.result)},n.onerror=function(e){console.log("Error: ",e)}}C[0],C[1],Object(i.useEffect)((function(){console.log(e.ChatID),Sn(e,un),un.connect(e.ChatID),S.apply(void 0,Object(he.a)(y).concat(Object(he.a)(En(e.files,e.messages))))}),[e.ChatID]);var N="";function I(){d(!0)}var E=function(e){Ie.a.get("".concat("http://127.0.0.1:8000","/chat-api/file/download/").concat(e.id,"/"))};return Object(Rn.a)(),Object(a.jsxs)("div",{className:"chatScreen",children:[Object(a.jsxs)("header",{className:"chatScreen_header",children:[Object(a.jsx)(ye.b,{to:"/chatpanel",children:Object(a.jsx)(Je.a,{id:"chatScreen_header_back_icon",children:Object(a.jsx)(Me.a,{style:{fontSize:"30px"}})})}),Object(a.jsx)(Je.a,{id:"chatScreen_header_video_icon",onClick:function(){Ie.a.get("http://localhost:5000/join").then((function(t){var n="".concat(e.name," is calling you \n\n  \n             ").concat(window.location.origin,"/join/").concat(t.data.link);m([]),g([]),yn(un,e,n,j,f)}))},children:Object(a.jsx)(Tn.a,{style:{fontSize:"30px",marigin:"10px"}})})]}),Object(a.jsx)("div",{style:{position:"sticky",top:"30%",zIndex:0},children:Object(a.jsx)(De.a,{id:"chatScreen_logo"})}),Object(a.jsx)(Nn,{onClose:function(){d(!1)},popup:l,friend_profile_id:e.friend_profile_id}),Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsxs)("p1",{className:"chatScreen_match",children:["YOU MATCHED WITH ",e.friend," ON ",e.when_matched]})}),Object(a.jsx)("ul",{className:"chatScreen_messages",children:e.contents.map((function(t){return t.name===e.name?void 0!==t.file_name?t.file_name.includes("jpg","jpeg","png")?Object(a.jsxs)("div",{className:"chatScreen_message_sent",children:[Object(a.jsx)("div",{className:"chatScreen_download_sent",children:Object(a.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(a.jsx)(xn.a,{})})}),Object(a.jsx)("img",{src:t.content})]}):Object(a.jsx)("div",{className:"chatScreen_message_sent",children:Object(a.jsxs)("div",{className:"chatScreen_file_sent",children:[Object(a.jsx)(On.a,{className:"chatScreen_file_icon"}),Object(a.jsx)("p2",{children:t.file_name}),Object(a.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(a.jsx)(xn.a,{})})]})}):Object(a.jsx)("div",{className:"chatScreen_message_sent",children:Object(a.jsxs)("p",{className:"chatScreen_sent",children:[t.content,Object(a.jsx)("br",{}),Object(a.jsx)("small",{children:t.timestamp.substring(0,16)})]})}):void 0!==t.file_name?t.file_name.includes("jpg","jpeg","png")?Object(a.jsxs)("div",{className:"chatScreen_message_reply",children:[Object(a.jsx)(pn.a,{className:"chatScreen_image",alt:t.name,src:e.friend_image,onClick:I}),Object(a.jsxs)("div",{className:"chatScreen_text",children:[Object(a.jsx)("img",{src:t.content}),Object(a.jsx)("div",{className:"chatScreen_download_reply",children:Object(a.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(a.jsx)(xn.a,{})})})]})]}):Object(a.jsxs)("div",{className:"chatScreen_message_reply",children:[Object(a.jsx)(pn.a,{className:"chatScreen_image",alt:t.name,src:e.friend_image,onClick:I}),Object(a.jsx)("div",{className:"chatScreen_text",children:Object(a.jsxs)("div",{className:"chatScreen_file_reply",children:[Object(a.jsx)(On.a,{className:"chatScreen_file_icon"}),Object(a.jsx)("p2",{children:t.file_name}),Object(a.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(a.jsx)(xn.a,{})})]})})]}):Object(a.jsxs)("div",{className:"chatScreen_message_reply",children:[Object(a.jsx)(pn.a,{className:"chatScreen_image",alt:t.name,src:e.friend_image,onClick:I}),Object(a.jsx)("div",{className:"chatScreen_text",children:Object(a.jsxs)("p",{className:"chatScreen_reply",children:[t.content,Object(a.jsx)("br",{}),Object(a.jsx)("small",{children:t.timestamp.substring(0,16)})]})})]})}))}),Object(a.jsx)("div",{children:Object(a.jsxs)("form",{className:"chatScreen_input",onSubmit:function(t){t.preventDefault(),(r.length>0||j.length>0||f.length>0)&&(yn(un,e,r,j,f),console.log("submitted")),c(""),m([]),g([])},children:[Object(a.jsx)("label",{for:"file-upload",class:"custom-file-upload",style:{marginTop:"auto"},children:Object(a.jsx)(mn.a,{})}),Object(a.jsx)("input",{type:"file",name:"image",accept:"audio/*, .pdf, .txt, .gif, .docx, .xlsx, .pptx, .pps",size:"60",id:"file-upload",onChange:function(e){k(e.target.files[0],(function(t){N=t,g([].concat(Object(he.a)(f),[{name:e.target.files[0].name,file:N}]))}))}}),Object(a.jsx)("label",{for:"image-upload",class:"custom-file-upload",style:{marginTop:"auto"},children:Object(a.jsx)(hn.a,{})}),Object(a.jsxs)("div",{className:"chatScreen_input_field",style:j.length>0?{border:"solid aqua"}:{},children:[f.length>0?f.map((function(e){return Object(a.jsxs)("div",{className:"chatScreen_file_outer",children:[Object(a.jsx)(On.a,{className:"chatScreen_file_icon"}),Object(a.jsx)("p1",{children:e.name})]})})):Object(a.jsx)(a.Fragment,{}),j.length>0?j.map((function(e){return Object(a.jsx)("img",{src:e.file})})):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)("input",{type:"file",name:"image",accept:"image/*, video/*",size:"60",id:"image-upload",onChange:function(e){k(e.target.files[0],(function(t){N=t,m([].concat(Object(he.a)(j),[{name:e.target.files[0].name,file:N}]))}))}}),Object(a.jsx)(fn.a,{className:"chatScreen_input_text",rowsMax:4,placeholder:"Message",onChange:function(e){c(e.target.value)}})]}),Object(a.jsx)("button",{className:"chatScreen_submit",type:"submit",children:"SEND"})]})})]})}));n(263);var Fn=Object(l.b)(null,(function(e){return{set_friend:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ke.a)(Ce.a.mark((function a(r){return Ce.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r({type:$,payload:{image:e,when_matched:t,friend_profile_id:n}});case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))((function(e){var t="chat/".concat(e.friend_data.name,"/").concat(e.friend_data.Chat_ID,"/"),n=Object(i.useState)(!1),r=Object(Le.a)(n,2),c=r[0],s=r[1];return Object(a.jsxs)("div",{className:"chatpanel",children:[Object(a.jsx)(pn.a,{className:"chatpanel_image",alt:e.friend_data.name,src:e.friend_data.image,onClick:function(){s(!0)}}),Object(a.jsxs)(ye.b,{to:t,onClick:function(){var t=e.friend_data.when_matched.split("T")[0];e.set_friend(e.friend_data.image,t,e.friend_data.profile_id)},className:"chatpanel_link",children:[Object(a.jsxs)("div",{className:"chatpanel_detail",children:[Object(a.jsx)("h2",{children:e.friend_data.name}),Object(a.jsx)("p",{children:e.friend_data.last_message})]}),Object(a.jsx)("p",{className:"chatpanel_timestamp",children:In(e.friend_data.last_timestamp)})]}),Object(a.jsx)(Nn,{onClose:s,popup:c,friend_profile_id:e.friend_data.profile_id})]})}));var Un=Object(l.b)((function(e){return{username:e.auth_reducer.name,id:e.auth_reducer.id}}),null)((function(e){var t=Object(i.useState)([]),n=Object(Le.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){Ie.a.defaults.headers={"Content-Type":"application/json"},Ie.a.get("".concat("http://127.0.0.1:8000","/chat-api/chat/").concat(e.id,"/")).then((function(e){c([].concat(Object(he.a)(r),Object(he.a)(e.data.chats_list)))}))}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(tt,{}),Object(a.jsx)("h1",{className:"chatpanel_title",children:"Messages"}),Object(a.jsxs)("div",{className:"chats",children:[r.map((function(e){return Object(a.jsx)(Fn,{friend_data:e})})),0===r.length?Object(a.jsxs)("h2",{className:"chatpanel_nomatch",children:["You don't have any matches yet(\xb4;\u03c9;\uff40)",Object(a.jsx)("br",{}),"Let's Swipe!!"]}):Object(a.jsx)(a.Fragment,{})]})]})})),Ln=(n(264),n(156)),Pn=n.n(Ln),Mn=n(157),Jn=n.n(Mn),qn=null,zn={},Bn={},Gn="",Wn=function(e){delete Bn[e];var t=document.getElementById(e);t&&t.remove()},Vn=function(){function e(t){var n=this;Object(on.a)(this,e),this.videoContainer={},this.message=[],this.streaming=!1,this.myID="",this.initializeSocketEvents=function(){n.socket.on("connect",(function(){console.log("socket connected")})),n.socket.on("user-disconnected",(function(e){console.log("user disconnected-- closing peers",e),zn[e]&&zn[e].close(),Wn(e)})),n.socket.on("disconnect",(function(){console.log("socket disconnected --")})),n.socket.on("error",(function(e){console.log("socket error --",e)}))},this.initializePeersEvents=function(){n.myPeer.on("open",(function(e){Gn=e;var t={userID:e,roomID:window.location.pathname.split("/")[2]};console.log("mydata::",t),n.socket.emit("join-room",t),n.setNavigatorToStream()})),n.myPeer.on("error",(function(e){console.log("peer connection error",e),n.myPeer.reconnect()}))},this.setNavigatorToStream=function(){n.getVideoAudioStream().then((function(e){e&&(n.streaming=!0,n.createVideo({id:Gn,stream:e}),n.setPeersListeners(e),n.newUserConnection(e))}))},this.getVideoAudioStream=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null===(e=n.settings.params)||void 0===e?void 0:e.quality;r&&(r=parseInt(r));var c=navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia||navigator.mediaDevices.mozGetUserMedia||navigator.mediaDevices.msGetUserMedia;return c({video:!!t&&{frameRate:r||12,noiseSuppression:!0,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}},audio:a})},this.createVideo=function(e){if(console.log("video created"),Bn[e.id]){document.getElementById(e.id).srcObject=e.stream}else{Bn[e.id]=Object(d.a)({},e);var t=document.getElementById("room-container"),n=document.createElement("div"),a=document.createElement("video");a.srcObject=Bn[e.id].stream,a.id=e.id,a.autoplay=!0,Gn===e.id&&(a.muted=!0,a.className="my_video"),n.appendChild(a),t.append(n)}},this.setPeersListeners=function(e){n.myPeer.on("call",(function(t){console.log("answered!!"),t.answer(e),t.on("stream",(function(e){console.log("user stream data",e),console.log(t.metadata),function(e){if(console.log("video created"),console.log("createobj::",e),Bn[e.id])document.getElementById(e.id).srcObject=e.stream;else{Bn[e.id]=Object(d.a)({},e);var t=document.getElementById("room-container"),n=document.createElement("div"),a=document.createElement("video");a.srcObject=Bn[e.id].stream,a.id=e.id,a.autoplay=!0,Gn===e.id&&(a.muted=!0,a.className="my_video"),n.appendChild(a),t.append(n)}}({id:t.metadata.id,stream:e})})),t.on("close",(function(){console.log("closing peers listeners",t.metadata.id),Wn(t.metadata.id)})),t.on("error",(function(){console.log("peer error ------"),Wn(t.metadata.id)})),zn[t.metadata.id]=t}))},this.newUserConnection=function(e){n.socket.on("new-user-connect",(function(t){n.connectToNewUser(t,e)}))},this.removeVideo=function(e){delete n.videoContainer[e];var t=document.getElementById(e);t&&t.remove()},this.destroyConnection=function(){var e,t,a=null===(e=n.videoContainer[n.myID])||void 0===e?void 0:e.stream.getTracks();null===a||void 0===a||a.forEach((function(e){e.stop()})),null===(t=qn)||void 0===t||t.socket.disconnect(),n.myPeer.destroy()},this.settings=t,this.myPeer=new Jn.a,this.socket=Pn()("http://localhost:5000"),this.initializeSocketEvents(),this.initializePeersEvents()}return Object(ln.a)(e,[{key:"connectToNewUser",value:function(e,t){var n=this;console.log("connectTonewUser is called");var a=e.userID,r=this.myPeer.call(a,t,{metadata:{id:Gn}});console.log("your data:: new user connected",e),r.on("stream",(function(t){console.log("your stream::",t),n.createVideo({id:a,stream:t,userData:e})})),r.on("close",(function(){console.log("closing new user",a),Wn(a)})),r.on("error",(function(){console.log("peer error ------"),Wn(a)})),zn[a]=r}}]),e}();var Hn=Object(l.b)((function(e,t){return{state:e,object:t,quality:t.location.search.split("=")[-1]}}),null)((function(e){var t=Object(i.useRef)(null);Object(i.useEffect)((function(){n()}),[]);var n=function(){t.current=function(){return qn=new Vn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({params:{quality:12}})};return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{id:"room-container"}),Object(a.jsx)("button",{onClick:function(){t.current&&t.current.destroyConnection(),e.history.push("/chatpanel")},children:"Disconnect"})]})})),Yn=Object(l.b)(null,(function(e){return{checkAuthenticated:function(){return e(Ee)}}}))((function(e){return Object(i.useEffect)((function(){e.checkAuthenticated()})),Object(a.jsx)(ye.a,{children:Object(a.jsxs)(Se.d,{children:[Object(a.jsx)(Se.b,{exact:!0,path:"/",component:Fe}),Object(a.jsx)(Se.b,{exact:!0,path:"/login",component:Ge}),Object(a.jsx)(Se.b,{exact:!0,path:"/signup",component:We}),Object(a.jsx)(Se.b,{exact:!0,path:"/reset_password",component:He}),Object(a.jsx)(Se.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:Ye}),Object(a.jsx)(Se.b,{exact:!0,path:"/activate/:uid/:token",component:Ve}),Object(a.jsx)(Se.b,{exact:!0,path:"/chat/:friend/:ChatID",component:Dn}),Object(a.jsx)(Se.b,{exact:!0,path:"/join/:room",component:Hn}),Object(a.jsx)(Se.b,{exact:!0,path:"/swipe",component:Pt}),Object(a.jsx)(Se.b,{exact:!0,path:"/setting",component:Jt}),Object(a.jsx)(Se.b,{exact:!0,path:"/chatpanel",component:Un}),Object(a.jsx)(Se.b,{exact:!0,path:"/edit",component:sn}),Object(a.jsx)(Se.b,{exact:!0,path:"/match",component:Ft}),Object(a.jsx)(Se.b,{exact:!0,path:"/delete",component:$t})]})})})),Kn=n(158),Zn=[n(159).a],Qn=Object(o.createStore)(ve,{},Object(Kn.composeWithDevTools)(o.applyMiddleware.apply(void 0,Zn))),Xn=Object(a.jsx)(l.a,{store:Qn,children:Object(a.jsx)(Yn,{})});c.a.render(Xn,document.getElementById("root"))},76:function(e,t,n){},98:function(e,t,n){}},[[291,1,2]]]);
//# sourceMappingURL=main.2360c26e.chunk.js.map