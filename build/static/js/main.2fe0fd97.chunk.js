(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{195:function(e,t,a){},198:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){},290:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=290},291:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(23),c=a.n(r),i=a(1),s=a.n(i),o=a(48),l=a(10),u=(a(176),a(3)),d="LOGIN_SUCCESS",p="LOGIN_FAIL",j="LOAD_USER_SUCCESS",m="LOAD_USER_FAIL",h="AUTHENTICATED_SUCCESS",b="AUTHENTICATED_FAIL",f="AUTHENTICATED_SUCCESS",g="AUTHENTICATED_FAIL",O="AUTHENTICATED_SUCCESS",_="AUTHENTICATED_FAIL",x="LOG_OUT",v="SIGNUP_SUCCESS",y="SIGNUP_FAIL",S="ACTIVATION_SUCCESS",k="ACTIVATION_FAIL",w="PROFILE_CREATE_SUCCESS",C="PROFILE_CREATE_FAIL",N="PROFILE_RECEIVE_SUCCESS",I="PROFILE_RECEIVE_FAIL",E="PROFILE_UPDATE_SUCCESS",A="PROFILE_UPDATE_FAIL",T="PROFILE_DELETE_SUCCESS",R="PROFILE_DELETE_FAIL",D="IMGAE_CREATE_SUCCESS",F="IMAGE_CREATE_FAIL",U="IMAGE_RECEIVE_SUCCESS",L="IMAGE_RECEIVE_FAIL",P="IMAGE_DELETE_SUCCESS",M="IMAGE_DELETE_FAIL",J="SWIPE_CREATE_SUCCESS",z="SWIPE_CREATE_FAIL",q="SWIPE_RECEIVE_SUCCESS",B="SWIPE_RECEIVE_FAIL",G="SWIPE_UPDATE_SUCCESS",W="CARD_RECEIVE_SUCCESS",V="CARD_RECEIVE_FAIL",H="CHAT_CREATE_SUCCESS",Y="CHAT_CREATE_SUCCESS",K="CHAT_FETCH_MESSAGES_SUCCESS",Z="CHAT_NEW_MESSAGE_SUCCESS",Q="CHAT_FETCH_FILES_SUCCESS",X="CHAT_NEW_FILE_SUCCESS",$="SET_FRIEND",ee="SEND_FIRST_MESSAGE_SUCCESS",te="SEND_FIRST_MESSAGE_FAIL",ae="CONTACT_CREATE_SUCCESS",ne="CONTACT_CREATE_FAIL",re="CONTACT_RECEIVE_SUCCESS",ce="CONTACT_RECEIVE_FAIL",ie="ERROR",se="REMOVE_ERROR",oe="BACK_TO_HOME",le={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!1,name:localStorage.getItem("name"),id:localStorage.getItem("id"),error:"",activation:""};var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case d:return localStorage.setItem("access",n.access),localStorage.setItem("refresh",n.refresh),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh,id:n.id});case p:case y:case x:return localStorage.removeItem("name"),localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("id"),Object(u.a)(Object(u.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,name:null,id:null});case j:return localStorage.setItem("id",n.id),localStorage.setItem("name",n.name),Object(u.a)(Object(u.a)({},e),{},{name:n.name,id:n.id});case m:return Object(u.a)(Object(u.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,name:null,id:null});case h:return Object(u.a)(Object(u.a)({},e),{},{name:n.name});case b:return Object(u.a)(Object(u.a)({},e),{},{name:null,id:null});case v:return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,id:n.id,activation:"Your account's been created successfully! Check your email and activate your account."});case f:case g:case O:case _:case k:case S:return Object(u.a)({},e);case ie:return console.log("error",n),Object(u.a)(Object(u.a)({},e),{},{error:n});case se:return Object(u.a)(Object(u.a)({},e),{},{error:""});case oe:return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:null});default:return e}};function de(e){return"null"===e||null===e?"":e}var pe={profile_id:localStorage.getItem("profile_id"),name:localStorage.getItem("name"),age:localStorage.getItem("age"),gender:localStorage.getItem("gender"),native_lan:localStorage.getItem("native_lan"),foreign_lan:localStorage.getItem("foreign_lan"),images:JSON.parse(localStorage.getItem("profile_images")),location:localStorage.getItem("location"),time_start:"null"!==localStorage.getItem("time_start")?localStorage.getItem("time_start"):"",time_end:de(localStorage.getItem("time_end")),intro:"null"!==localStorage.getItem("intro")?localStorage.getItem("intro"):"",freeday:"null"!==localStorage.getItem("freeday")?localStorage.getItem("freeday"):""};var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case N:case E:return console.log("PROFILE REDUCER"),""!==de(n.image)?n.image:"",localStorage.setItem("profile_id",n.id),localStorage.setItem("name",n.name),localStorage.setItem("age",n.age),localStorage.setItem("gender",n.gender),localStorage.setItem("native_lan",n.native_lan),localStorage.setItem("foreign_lan",n.foreign_lan),localStorage.setItem("profile_images",JSON.stringify(n.images)),localStorage.setItem("location",n.location),localStorage.setItem("time_start",n.time_start),localStorage.setItem("time_end",n.time_end),localStorage.setItem("intro",n.intro),localStorage.setItem("freeday",n.freeday),Object(u.a)(Object(u.a)({},e),{},{profile_id:n.id,name:n.name,age:n.age,gender:n.geder,native_lan:n.native_lan,foreign_lan:n.foreign_lan,images:n.images,location:n.location,time_start:de(n.time_start),time_end:de(n.time_end),intro:n.intro,freeday:n.freeday});case T:case x:return localStorage.removeItem("profile_id"),localStorage.removeItem("name"),localStorage.removeItem("age"),localStorage.removeItem("gender"),localStorage.removeItem("native_lan"),localStorage.removeItem("foreign_lan"),localStorage.removeItem("profile_images"),localStorage.removeItem("location"),localStorage.removeItem("time_start"),localStorage.removeItem("time_end"),localStorage.removeItem("intro"),localStorage.removeItem("freeday"),Object(u.a)(Object(u.a)({},e),{},{profile_id:null,name:null,age:null,gender:null,native_lan:null,foreign_lan:null,images:null,location:null,time_start:null,time_end:null,intro:null,freeday:null});case w:return Object(u.a)(Object(u.a)({},e),{},{profile_id:n.id});case A:case I:case R:case G:default:return Object(u.a)({},e)}},me={swipe_id:localStorage.getItem("swipe_id"),cards:JSON.parse(localStorage.getItem("cards")),swiped:JSON.parse(localStorage.getItem("swiped")),liked:JSON.parse(localStorage.getItem("liked"))};var he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case J:return Object(u.a)(Object(u.a)({},e),{},{swipe_id:n.id});case q:return localStorage.setItem("swipe_id",n.id),localStorage.setItem("swiped",JSON.stringify(n.swiped)),localStorage.setItem("liked",JSON.stringify(n.liked)),Object(u.a)(Object(u.a)({},e),{},{swipe_id:n.id,swiped:n.swiped,liked:n.liked});case z:case B:case V:return Object(u.a)({},e);case x:return localStorage.removeItem("swipe_id"),localStorage.removeItem("swiped"),localStorage.removeItem("liked"),localStorage.removeItem("cards"),Object(u.a)({},e);case W:return localStorage.setItem("cards",JSON.stringify(n)),Object(u.a)(Object(u.a)({},e),{},{cards:n});default:return Object(u.a)({},e)}},be=a(19),fe={messages:[],files:[],latest_chat_id:localStorage.getItem("latest_chat_id"),friend_image:localStorage.getItem("friend_image"),when_matched:localStorage.getItem("when_matched"),friend_profile_id:localStorage.getItem("friend_profile_id")};var ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case H:return console.log(n),localStorage.setItem("latest_chat_id",n.id),Object(u.a)(Object(u.a)({},e),{},{latest_chat_id:n.id});case Y:case te:return Object(u.a)({},e);case K:return Object(u.a)(Object(u.a)({},e),{},{messages:n.reverse()});case Z:return Object(u.a)(Object(u.a)({},e),{},{messages:[].concat(Object(be.a)(e.messages),[n[0]])});case Q:return Object(u.a)(Object(u.a)({},e),{},{files:n.reverse()});case X:return Object(u.a)(Object(u.a)({},e),{},{files:[].concat(Object(be.a)(e.files),[n[0]])});case $:return localStorage.setItem("friend_image",n.image),localStorage.setItem("when_matched",n.when_matched),localStorage.setItem("friend_profile_id",n.friend_profile_id),Object(u.a)(Object(u.a)({},e),{},{friend_image:n.image,when_matched:n.when_matched,friend_profile_id:n.friend_profile_id});case x:return localStorage.removeItem("friend_image"),localStorage.removeItem("when_matched"),localStorage.removeItem("friend_profile_id"),Object(u.a)(Object(u.a)({},e),{},{friend_image:null,when_matched:null,friend_profile_id:null});case ee:default:return Object(u.a)({},e)}},Oe={contact_id:localStorage.getItem("contact_id")};var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case ae:return Object(u.a)(Object(u.a)({},e),{},{contact_id:n.id});case ne:case ce:return Object(u.a)({},e);case re:return localStorage.setItem("contact_id",n.id),Object(u.a)(Object(u.a)({},e),{},{contact_id:n.id});case x:return localStorage.removeItem("contact_id"),Object(u.a)(Object(u.a)({},e),{},{contact_id:null});default:return Object(u.a)({},e)}},xe={images:JSON.parse(localStorage.getItem("images"))};var ve=Object(o.combineReducers)({auth_reducer:ue,profile_reducer:je,swipe_reducer:he,chat_reducer:ge,contact_reducer:_e,image_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case D:return Object(u.a)({},e);case U:return localStorage.setItem("images",JSON.stringify(n.images)),Object(u.a)(Object(u.a)({},e),{},{images:Object(be.a)(n.images)});case F:case M:case L:case P:return Object(u.a)({},e);case x:return localStorage.removeItem("images"),Object(u.a)(Object(u.a)({},e),{},{images:null});default:return Object(u.a)({},e)}}}),ye=a(14),Se=a(17),ke=a(5),we=a.n(ke),Ce=a(11),Ne=a(9),Ie=a.n(Ne),Ee=function(){return function(){var e=Object(Ce.a)(we.a.mark((function e(t){var a,n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=16;break}return a={headers:{"Content-Type":"application/json",Accept:"application/json"}},n=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/auth/jwt/verify/"),n,a);case 6:"token_not_valid"!==e.sent?t({type:h}):(t({type:b}),t({type:ie,payload:"Token is not valid"})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:b}),t({type:ie,payload:e.t0.response});case 14:e.next=18;break;case 16:t({type:b,payload:"An error occured. Please try again"}),t({type:ie,payload:"An error occured. Please try again"});case 18:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},Ae=function(){return function(e){e({type:se})}},Te=a.p+"static/media/home_page4.fe3e870c.jpg",Re=a(35),De=a.n(Re),Fe=(a(195),Object(l.b)((function(e){return{activation:e.auth_reducer.activation}}),(function(e){return{remove_error:function(){return e(Ae())},back_to_home:function(){return e((function(e){e({type:oe})}))}}}))((function(e){var t;return t=window.innerWidth>650?{width:"100%",height:"800px",backgroundSize:"cover",backgroundImage:"url(".concat(Te,")")}:{width:"100%",height:"800px",backgroundSize:"cover",backgroundColor:"#ec7878"},Object(i.useEffect)((function(){e.remove_error(),e.back_to_home(),console.log("https://speakup-heroku.herokuapp.com")}),[]),Object(n.jsxs)("div",{style:t,className:"home",children:[Object(n.jsxs)("div",{className:"home_title",children:[Object(n.jsx)(De.a,{id:"home_logo"}),Object(n.jsx)("h1",{children:"Speak Up"})]}),Object(n.jsx)("h1",{className:window.innerWidth>650?"home_intro":"home_intro2",children:"Find Your Language Exchange Partner!!"}),Object(n.jsx)(ye.b,{to:"/login",children:Object(n.jsx)("button",{className:"home_button1",onFocus:"this.blur();",children:Object(n.jsx)("span",{children:"Sign In"})})}),Object(n.jsx)(ye.b,{to:"/signup",children:Object(n.jsx)("button",{className:"home_button2",onFocus:"this.blur();",children:Object(n.jsx)("span",{children:"Sign Up"})})}),Object(n.jsx)("p",{style:{color:"yellow",textAlign:"center",fontSize:"25px"},children:e.activation})]})}))),Ue=a(16),Le=a(4),Pe=a(36),Me=a.n(Pe),Je=a(315),ze=function(e){return function(){var t=Object(Ce.a)(we.a.mark((function t(a){var n;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/swipe/detail/").concat(e,"/"));case 3:n=t.sent,a({type:q,payload:n.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:B,payload:t.t0.response}),a({type:ie,payload:t.t0.response});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},qe=function(e){return function(){var t=Object(Ce.a)(we.a.mark((function t(a){var n;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/profile/image/").concat(e,"/"));case 3:n=t.sent,console.log("images::",n.data),a({type:U,payload:n.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:L}),a({type:ie});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Be=(a(198),a(58)),Ge=Object(l.b)((function(e){return{isAuthenticated:e.auth_reducer.isAuthenticated,id:e.auth_reducer.id,error:e.auth_reducer.error,profile_id:e.profile_reducer.profile_id,contact_id:e.contact_reducer.contact_id,swipe_id:e.swipe_reducer.swipe_id,images:e.image_reducer.images}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(){var a=Object(Ce.a)(we.a.mark((function a(n){var r,c,i;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/auth/jwt/create/"),c,r);case 5:i=a.sent,console.log(i.data),n({type:d,payload:i.data}),n(function(){var e=Object(Ce.a)(we.a.mark((function e(t){var a,n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/auth/users/me/"),a);case 5:n=e.sent,console.log("data in load::",n.data),t({type:j,payload:n.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:m,payload:"An error occured. Please try again."});case 13:e.next=17;break;case 15:console.log("no access"),t({type:m,payload:"An error occured. Please try again"});case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),n({type:p,payload:"Email or password is invalid."}),n({type:ie,payload:"Email or password is invalid."});case 15:case"end":return a.stop()}}),a,null,[[2,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},receive_profile:function(t){return e(function(e){return function(){var t=Object(Ce.a)(we.a.mark((function t(a){var n;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("PROFILE"),t.prev=1,t.next=4,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/profile/detail/").concat(e,"/"));case 4:n=t.sent,console.log("profile::",n.data),a({type:N,payload:n.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:I,payload:t.t0.reponse.request.reponse}),a({type:ie,payload:t.t0.reponse.request.reponse});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},receive_swipe:function(t){return e(ze(t))},receive_contact:function(t){return e(function(e){return function(){var t=Object(Ce.a)(we.a.mark((function t(a){var n;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("CONTACT"),t.prev=1,t.next=4,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/chat-api/contact/detail/").concat(e,"/"));case 4:n=t.sent,a({type:re,payload:n.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:ce}),a({type:ie});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},remove_error:function(){return e(Ae())},image_receive:function(t){return e(qe(t))}}}))((function(e){var t=Object(i.useState)(!1),a=Object(Le.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)(0),o=Object(Le.a)(s,2),l=o[0],d=o[1],p=Object(i.useState)({email:"",password:""}),j=Object(Le.a)(p,2),m=j[0],h=j[1];Object(i.useEffect)((function(){e.remove_error()}),[]);var b=m.email,f=m.password,g=function(e){return h(Object(u.a)(Object(u.a)({},m),{},Object(Ue.a)({},e.target.name,e.target.value)))};return console.log("count",l),e.id&&0===l&&(d(1),e.receive_contact(e.id)),e.contact_id&&1===l&&(d(2),e.receive_swipe(e.id)),e.swipe_id&&2===l&&(d(3),e.receive_profile(e.id)),e.profile_id&&3===l&&(d(4),e.image_receive(e.profile_id)),""!==e.error&&!0===r&&c(!1),null!==e.images?Object(n.jsx)(Se.a,{to:"/swipe"}):Object(n.jsxs)("div",{className:"login",children:[Object(n.jsxs)("header",{className:"login_header",children:[Object(n.jsx)(ye.b,{to:"/",children:Object(n.jsx)(Je.a,{id:"login_back",children:Object(n.jsx)(Me.a,{})})}),Object(n.jsxs)("div",{className:"login_title",children:[Object(n.jsx)(De.a,{id:"login_logo"}),Object(n.jsx)("h1",{children:"Speak Up"})]})]}),Object(n.jsxs)("div",{className:"login_form",children:[Object(n.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),c(!0),e.login(b,f),e.remove_error(),d(0)}(t)},children:[Object(n.jsx)("input",{className:"login_input",type:"email",placeholder:"Email",name:"email",value:b,onChange:function(e){return g(e)},required:!0}),Object(n.jsx)("input",{className:"login_input",type:"password",placeholder:"Password",name:"password",value:f,onChange:function(e){return g(e)},required:!0}),Object(n.jsx)("button",{className:"login_button",type:"submit",onfocus:"this.blur();",children:Object(n.jsx)("span",{children:"Log In"})})]}),Object(n.jsxs)("p",{className:"mt-3",children:["Don't have an account? ",Object(n.jsx)(ye.b,{to:"/signup",children:"Sign up"})]}),Object(n.jsxs)("p",{className:"mt-3",children:["Forget your password? ",Object(n.jsx)(ye.b,{to:"/reset_password",children:"Reset Password"})]}),Object(n.jsx)("p",{style:{color:"red",textAlign:"center"},children:e.error})]}),Object(n.jsx)("div",{style:{textAlign:"center"},children:r?Object(n.jsx)(Be.Default,{color:"aqua"}):Object(n.jsx)(n.Fragment,{})})]})})),We=(a(230),Object(l.b)((function(e){return{isAuthenticated:e.auth_reducer.isAuthenticated,id:e.auth_reducer.id,profile_id:e.profile_reducer.profile_id,contact_id:e.contact_reducer.contact_id,swipe_id:e.swipe_reducer.swipe_id,error:e.auth_reducer.error}}),(function(e){return{signup:function(t,a,n,r){return e(function(e,t,a,n){return function(){var r=Object(Ce.a)(we.a.mark((function r(c){var i,s,o;return we.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:e,email:t,password:a,re_password:n}),r.prev=2,r.next=5,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/auth/users/"),s,i);case 5:o=r.sent,c({type:v,payload:o.data}),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(2),console.log(r.t0),c({type:ie,payload:r.t0.response.request.response}),c({type:y,payload:r.t0.response.request.response});case 14:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,a,n,r))},profile_create:function(t,a,n,r,c){return e(function(e,t,a,n){return function(){var r=Object(Ce.a)(we.a.mark((function r(c){var i,s,o;return we.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==e){r.next=16;break}return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({user:e,name:t,native_lan:a,foreign_lan:n}),r.prev=3,r.next=6,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/profile/create/"),s,i);case 6:o=r.sent,c({type:w,payload:o.data}),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(3),c({type:C,paylaod:r.t0.reponse.request.reponse}),c({type:ie,payload:r.t0.reponse.request.reponse});case 14:r.next=18;break;case 16:c({type:C}),c({type:ie,payload:"An error occured. Please try again"});case 18:case"end":return r.stop()}}),r,null,[[3,10]])})));return function(e){return r.apply(this,arguments)}}()}(t,a,n,r))},swipe_create:function(t){return e((a=t,function(){var e=Object(Ce.a)(we.a.mark((function e(t){var n,r,c;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(JSON.stringify({user:a})),null==a){e.next=17;break}return e.prev=2,n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({user:a}),e.next=7,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/swipe/create/"),r,n);case 7:c=e.sent,t({type:J,payload:c.data}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),t({type:z,payload:e.t0.response.request.response}),t({type:ie,payload:e.t0.response.request.response});case 15:e.next=19;break;case 17:t({type:z}),t({type:ie,payload:"An error occured. Please try again."});case 19:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()));var a},contact_create:function(t){return e(function(e){return function(){var t=Object(Ce.a)(we.a.mark((function t(a){var n,r,c;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e){t.next=16;break}return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({user:e}),t.prev=3,t.next=6,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/chat-api/contact/create/"),r,n);case 6:c=t.sent,a({type:ae,payload:c.data}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),a({type:ne,payload:t.t0.response.request.response}),a({type:ie,payload:t.t0.response.request.response});case 14:t.next=18;break;case 16:a({type:ne}),a({type:ie,paylaod:"An error occured. Please try again."});case 18:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},remove_error:function(){return e(Ae())}}}))((function(e){var t=Object(i.useState)(!1),a=Object(Le.a)(t,2),r=(a[0],a[1]),c=Object(i.useState)(!1),s=Object(Le.a)(c,2),o=s[0],l=s[1],d=Object(i.useState)(0),p=Object(Le.a)(d,2),j=p[0],m=p[1],h=Object(i.useState)({name:"",email:"",password:"",re_password:"",native_lan:"",foreign_lan:""}),b=Object(Le.a)(h,2),f=b[0],g=b[1];Object(i.useEffect)((function(){e.remove_error()}),[]);var O=f.name,_=f.email,x=f.password,v=f.re_password,y=f.native_lan,S=f.foreign_lan,k=function(e){return g(Object(u.a)(Object(u.a)({},f),{},Object(Ue.a)({},e.target.name,e.target.value)))};e.id&&e.isAuthenticated&&0===j&&(m(1),e.profile_create(e.id,O,y,S)),e.profile_id&&1===j&&(m(2),e.swipe_create(e.id)),e.swipe_id&&2===j&&(m(3),e.contact_create(e.id)),""!==e.error&&!0===o&&l(!1);var w=["Arabic","Bengali","Burmese","Chinese","English","French","German","Gujarati","Hindi","Italian","Japanese","Kannada","Korean","Malayalam","Marathi","Oriya","Panjabi","Persian","Polish","Portuguese","Russian","Spanish","Tamil","Telugu","Thai","Turkish","Ukrainian","Urdu","Vietnamese"];return e.isAuthenticated&&e.contact_id&&3===j?Object(n.jsx)(Se.a,{to:"/"}):Object(n.jsxs)("div",{className:"signup",children:[Object(n.jsxs)("header",{className:"signup_header",children:[Object(n.jsx)(ye.b,{to:"/",children:Object(n.jsx)(Je.a,{id:"signup_back",children:Object(n.jsx)(Me.a,{})})}),Object(n.jsxs)("div",{className:"signup_title",children:[Object(n.jsx)(De.a,{id:"signup_logo"}),Object(n.jsx)("h1",{children:"Speak Up"})]})]}),Object(n.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),l(!0),e.signup(O,_,x,v),e.remove_error(),r(!0)}(t)},children:[Object(n.jsxs)("div",{className:"signup_form",children:[Object(n.jsxs)("div",{className:"col signup_form1",children:[Object(n.jsx)("input",{className:"signup_input",type:"name",placeholder:"Name*",name:"name",value:O,onChange:function(e){return k(e)},required:!0}),Object(n.jsx)("input",{className:"signup_input",type:"email",placeholder:"Email*",name:"email",value:_,onChange:function(e){return k(e)},required:!0}),Object(n.jsx)("input",{className:"signup_input",type:"password",placeholder:"Password*",name:"password",value:x,onChange:function(e){return k(e)},required:!0}),Object(n.jsx)("input",{className:"signup_input",type:"password",placeholder:"Confirm Password*",name:"re_password",value:v,onChange:function(e){return k(e)},required:!0})]}),Object(n.jsxs)("div",{className:"col signup_form2",children:[Object(n.jsxs)("div",{className:"signup_lan",children:["What language are you fluent in?",Object(n.jsxs)("select",{className:"signup_select",name:"native_lan",required:!0,onChange:function(e){return k(e)},children:[Object(n.jsx)("option",{hidden:!0,children:"You speak ..."}),w.map((function(e){return Object(n.jsx)("option",{value:e,children:e})}))]})]}),Object(n.jsxs)("div",{className:"signup_lan",children:["What do you want to learn?",Object(n.jsxs)("select",{className:"signup_select",name:"foreign_lan",required:!0,onChange:function(e){return k(e)},children:[Object(n.jsx)("option",{hidden:!0,children:"You want to learn ..."}),w.map((function(e){return Object(n.jsx)("option",{value:e,children:e})}))]})]})]})]}),Object(n.jsx)("div",{className:"signup_button",children:Object(n.jsx)("button",{onFocus:"this.blur();",type:"submit",children:Object(n.jsx)("span",{children:"Sign Up"})})})]}),Object(n.jsxs)("p",{style:{textAlign:"center"},children:["Already have an account? ",Object(n.jsx)(ye.b,{to:"/login",children:"Log in"})]}),Object(n.jsx)("p",{style:{color:"red",textAlign:"center"},children:e.error}),Object(n.jsx)("div",{style:{textAlign:"center"},children:o?Object(n.jsx)(Be.Default,{color:"palevioletred"}):Object(n.jsx)(n.Fragment,{})})]})}))),Ve=Object(l.b)((function(e,t){return{isAuthenticated:e.auth_reducer.isAuthenticated,uid:t.match.params.uid,token:t.match.params.token}}),(function(e){return{verify:function(t,a){return e(function(e,t){return function(){var a=Object(Ce.a)(we.a.mark((function a(n){var r,c,i;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({uid:e,token:t}),a.prev=2,a.next=5,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/auth/users/activation/"),c,r);case 5:i=a.sent,n({type:S,payload:i.data}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),n({type:k,payload:a.t0}),n({type:ie,payload:a.t0});case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))((function(e){var t=Object(i.useState)(!1),a=Object(Le.a)(t,2),r=a[0],c=a[1];return r?Object(n.jsx)(Se.a,{to:"/"}):Object(n.jsx)("div",{className:"eontainer mt-5",children:Object(n.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"},children:[Object(n.jsx)("h1",{children:"Verify your account:"}),Object(n.jsx)("button",{onClick:function(t){console.log(e.uid,e.token),e.verify(e.uid,e.token),c(!0)},style:{marginTop:"50px"},type:"button",className:"btn btn-primary",children:"Verify"})]})})})),He=(a(231),Object(l.b)(null,(function(e){return{reset_password:function(t){return e(function(e){return function(){var t=Object(Ce.a)(we.a.mark((function t(a){var n,r,c;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=2,t.next=5,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/auth/users/reset_password/"),r,n);case 5:c=t.sent,a({type:f,payload:c.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:g,payload:t.t0.response}),a({type:ie,payload:t.t0.response});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(i.useState)(!1),a=Object(Le.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)({email:""}),o=Object(Le.a)(s,2),l=o[0],d=o[1],p=l.email;return r?Object(n.jsx)(Se.a,{to:"/"}):Object(n.jsxs)("div",{className:"password_reset",children:[Object(n.jsx)("header",{className:"passowrd_reset_header",children:Object(n.jsx)(ye.b,{to:"/login",children:Object(n.jsx)(Je.a,{id:"password_reset_back",children:Object(n.jsx)(Me.a,{style:{fontSize:"30px"}})})})}),Object(n.jsxs)("div",{className:"password_reset_content",children:[Object(n.jsx)("h1",{children:"Request Password Reset"}),Object(n.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.reset_password(p),c(!0)}(t)},children:[Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{className:"password_reset_input",type:"email",placeholder:"Email",name:"email",value:p,onChange:function(e){return function(e){return d(Object(u.a)(Object(u.a)({},l),{},Object(Ue.a)({},e.target.name,e.target.value)))}(e)},required:!0})}),Object(n.jsx)("button",{className:"password_reset_button",type:"submit",children:"Reset Password"})]})]})]})}))),Ye=(a(232),Object(l.b)((function(e,t){return{uid:t.match.params.uid,token:t.match.params.token}}),(function(e){return{reset_password_confirm:function(t,a,n,r){return e(function(e,t,a,n){return function(){var r=Object(Ce.a)(we.a.mark((function r(c){var i,s;return we.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={headers:{"Content-Type":"application/json"}},s=JSON.stringify({uid:e,token:t,new_password:a,re_new_password:n}),console.log("PASSWORD_RESET_CONFIRM"),r.prev=3,r.next=6,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/auth/users/reset_password_confirm/"),s,i);case 6:c({type:O}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(3),c({type:_,payload:r.t0.response}),c({type:ie,payload:r.t0.response});case 13:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,a,n,r))}}}))((function(e){var t=Object(i.useState)(!1),a=Object(Le.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)({new_password:"",re_new_password:""}),o=Object(Le.a)(s,2),l=o[0],d=o[1];console.log("token::",e.token);var p=l.new_password,j=l.re_new_password,m=function(e){return d(Object(u.a)(Object(u.a)({},l),{},Object(Ue.a)({},e.target.name,e.target.value)))};return r?Object(n.jsx)(Se.a,{to:"/"}):Object(n.jsxs)("div",{className:"password_reset_confirm",children:[Object(n.jsx)("header",{className:"passowrd_reset_confirm_header",children:Object(n.jsx)(ye.b,{to:"/login",children:Object(n.jsx)(Je.a,{id:"password_reset_confirm_back",children:Object(n.jsx)(Me.a,{style:{fontSize:"30px"}})})})}),Object(n.jsxs)("div",{className:"password_reset_confirm_content",children:[Object(n.jsx)("h1",{children:"Request Password Reset"}),Object(n.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var a=e.uid,n=e.token;e.reset_password_confirm(a,n,p,j),c(!0)}(t)},children:[Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{className:"password_reset_confirm_input",type:"password",placeholder:"New Pasword",name:"new_password",value:p,onChange:function(e){return m(e)},required:!0})}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{className:"password_reset_confirm_input",type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:j,onChange:function(e){return m(e)},required:!0})}),Object(n.jsx)("button",{className:"password_reset_confirm_button",type:"submit",children:"Confirm Password Reset "})]})]})]})}))),Ke=a(140),Ze=a.n(Ke),Qe=(a(235),a(236),a(141)),Xe=a.n(Qe),$e=a(142),et=a.n($e);var tt=function(e){return e.backButton,Object(Se.g)(),Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)(ye.b,{to:"/setting",children:Object(n.jsx)(Je.a,{id:"header_icon",children:Object(n.jsx)(Xe.a,{fontSize:"large"})})}),Object(n.jsx)(ye.b,{to:"/swipe",children:Object(n.jsx)(Je.a,{id:"header_logo",children:Object(n.jsx)(De.a,{style:{fontSize:50}})})}),Object(n.jsx)(ye.b,{to:"/chatpanel",children:Object(n.jsx)(Je.a,{id:"header_icon",children:Object(n.jsx)(et.a,{fontSize:"large"})})})]})},at=(a(237),a(144)),nt=a.n(at),rt=a(143),ct=a.n(rt),it=a(145),st=a.n(it);var ot=function(e){return Object(n.jsxs)("div",{className:"footer",children:[Object(n.jsx)(Je.a,{id:"swipeButtons_nope",onClick:e.swipe_left,children:Object(n.jsx)(ct.a,{fontSize:"large"})}),Object(n.jsx)(Je.a,{id:"swipeButtons_repeat",children:Object(n.jsx)(nt.a,{fontSize:"large"})}),Object(n.jsx)(Je.a,{id:"swipeButtons_like",onClick:e.swipe_right,children:Object(n.jsx)(st.a,{fontSize:"large"})})]})},lt=a(316),ut=a(325),dt=a(323),pt=a(293),jt=a(60),mt=a(328),ht=a(320),bt=a(318),ft=a(71),gt=a.n(ft),Ot=a(317),_t=a(319),xt=a(321),vt=a(322),yt=a(8),St=a(51),kt=a.n(St),wt=a(45),Ct=a.n(wt),Nt=a(46),It=a.n(Nt),Et=a(59),At=a.n(Et),Tt=(a(98),a(76),Object(lt.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:475,display:"block",maxWidth:400,overflow:"hidden",width:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})));var Rt=Object(l.b)((function(e,t){return{contact_id:e.contact_reducer.contact_id,data:t.data,onClose:t.onClose}}),(function(e){return{send_first_message:function(t,a){return e(function(e,t){return function(){var a=Object(Ce.a)(we.a.mark((function a(n){var r,c,i,s,o,l,u;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={headers:{"Content-Type":"application/json"}},console.log("send_first_message"),c={contact:t,content:e},a.next=6,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/chat-api/message/create/"),c,r);case 6:return i=a.sent,console.log(JSON.stringify(i)),s=i.data.id,o=localStorage.getItem("latest_chat_id"),l={messages:[s]},a.next=13,Ie.a.put("".concat("https://speakup-heroku.herokuapp.com","/chat-api/chat/detail/").concat(o,"/"),l,r);case 13:u=a.sent,n({type:ee,payload:u.data}),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),n({type:te,payload:a.t0}),n({type:ie,payload:a.t0});case 21:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))((function(e){var t=Tt(),a=s.a.useState(!1),r=Object(Le.a)(a,2),c=r[0],o=r[1],l=Object(i.useState)(""),u=Object(Le.a)(l,2),d=u[0],p=u[1],j=function(){o(!c)},m=Object(jt.a)(),h=s.a.useState(0),b=Object(Le.a)(h,2),f=b[0],g=b[1],O=e.data.images.length>0?e.data.images.length:1;return Object(n.jsxs)(Ot.a,{id:"card_root",children:[Object(n.jsxs)("div",{id:"card_imagebox",style:{position:"relative"},children:[Object(n.jsx)(At.a,{axis:"rtl"===m.direction?"x-reverse":"x",index:f,onChangeIndex:function(e){g(e)},enableMouseEvents:!0,children:void 0===e.images?e.data.images.map((function(a,r){return Object(n.jsx)("div",{children:Math.abs(f-r)<=2?Object(n.jsx)("img",{className:t.img,src:a}):null},e.data.name)})):e.data.images.map((function(a,r){return Object(n.jsx)("div",{children:Math.abs(f-r)<=2?Object(n.jsx)("img",{className:t.img,src:a.image}):null},e.id)}))}),Object(n.jsx)("div",{id:"card_stepper",children:Object(n.jsx)(mt.a,{variant:"dots",steps:O>1?O:0,position:"static",activeStep:f,nextButton:Object(n.jsx)(bt.a,{size:"small",onClick:function(){g((function(e){return e+1}))},disabled:f===O-1,id:"outline",children:"rtl"===m.direction?Object(n.jsx)(Ct.a,{}):Object(n.jsx)(It.a,{})}),backButton:Object(n.jsx)(bt.a,{size:"small",onClick:function(){g((function(e){return e-1}))},disabled:0===f,id:"outline",children:"rtl"===m.direction?Object(n.jsx)(It.a,{}):Object(n.jsx)(Ct.a,{})})})}),Object(n.jsx)("h1",{children:"New Match!"})]}),Object(n.jsx)(Je.a,{id:"match_icon",onClick:function(){return e.onClose(!1)},children:Object(n.jsx)(gt.a,{style:{fontSize:"large"}})}),Object(n.jsx)(_t.a,{children:Object(n.jsx)(ht.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.name})}),Object(n.jsxs)(ht.a,{style:{marginLeft:"10px"},children:["native language: ",e.data.native_lan,Object(n.jsx)("br",{}),"want to learn: ",e.data.foreign_lan,Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)(xt.a,{disableSpacing:!0,children:Object(n.jsx)(Je.a,{className:Object(yt.a)(t.expand,Object(Ue.a)({},t.expandOpen,c)),onClick:j,"aria-expanded":c,"aria-label":"show more",id:"outline",children:Object(n.jsx)(kt.a,{onClick:j,id:"outline"})})}),Object(n.jsx)(vt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(n.jsxs)(_t.a,{children:[Object(n.jsxs)(ht.a,{paragraph:!0,children:[function(){return null!=e.data.freeday?Object(n.jsxs)(n.Fragment,{children:["freeday: ",e.data.freeday]}):null},"  ",function(){return null!=e.data.time_start||null!=e.data.time_end?Object(n.jsxs)(n.Fragment,{children:[e.data.time_start,"~",e.data.time_end]}):Object(n.jsx)(n.Fragment,{})}]}),Object(n.jsx)(ht.a,{className:"card_intro",paragraph:!0,children:e.intro})]})}),Object(n.jsxs)("form",{className:"match_form",onSubmit:function(t){t.preventDefault(),e.send_first_message(d,e.contact_id),p(""),e.onClose(!1)},children:[Object(n.jsx)("input",{type:"text",placeholder:"write the first message!",className:"match_input",onChange:function(e){p(e.target.value)}}),Object(n.jsx)("button",{className:"match_submit",type:"submit",children:"SEND"})]})]})})),Dt=Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5]}}}));var Ft=function(e){var t=Dt();return Object(n.jsx)("div",{children:Object(n.jsx)(ut.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.popup,closeAfterTransition:!0,BackdropComponent:dt.a,BackdropProps:{timeout:500},children:Object(n.jsx)(pt.a,{in:e.popup,children:Object(n.jsx)("div",{className:t.paper,children:Object(n.jsx)(Rt,{data:e.person,onClose:e.onClose})})})})})},Ut=Object(lt.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:475,display:"block",maxWidth:400,overflow:"hidden",width:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var Lt=function(e){var t=Ut(),a=s.a.useState(!1),r=Object(Le.a)(a,2),c=r[0],i=r[1],o=function(){i(!c)},l=Object(jt.a)(),u=s.a.useState(0),d=Object(Le.a)(u,2),p=d[0],j=d[1],m=null!=e.data.images&&e.data.images.length>0?e.data.images.length:1;return Object(n.jsxs)(Ot.a,{id:"card_root",children:[Object(n.jsxs)("div",{id:"card_imagebox",style:{position:"relative"},children:[Object(n.jsx)(At.a,{axis:"rtl"===l.direction?"x-reverse":"x",index:p,onChangeIndex:function(e){j(e)},enableMouseEvents:!0,children:void 0===e.images?e.data.images.map((function(a,r){return Object(n.jsx)("div",{children:Math.abs(p-r)<=2?Object(n.jsx)("img",{className:t.img,src:a}):null},e.data.name)})):e.images.map((function(a,r){return Object(n.jsx)("div",{children:Math.abs(p-r)<=2?Object(n.jsx)("img",{className:t.img,src:a.image}):null},e.id)}))}),Object(n.jsx)("div",{id:"card_stepper",children:Object(n.jsx)(mt.a,{variant:"dots",steps:m>1?m:0,position:"static",activeStep:p,nextButton:Object(n.jsx)(bt.a,{size:"small",onClick:function(){j((function(e){return e+1}))},disabled:p===m-1,id:"outline",children:"rtl"===l.direction?Object(n.jsx)(Ct.a,{}):Object(n.jsx)(It.a,{})}),backButton:Object(n.jsx)(bt.a,{size:"small",onClick:function(){j((function(e){return e-1}))},disabled:0===p,id:"outline",children:"rtl"===l.direction?Object(n.jsx)(It.a,{}):Object(n.jsx)(Ct.a,{})})})})]}),Object(n.jsx)(_t.a,{children:Object(n.jsx)(ht.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.name})}),Object(n.jsxs)(ht.a,{style:{marginLeft:"10px"},children:["native language: ",e.data.native_lan,Object(n.jsx)("br",{}),"want to learn: ",e.data.foreign_lan,Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)(xt.a,{disableSpacing:!0,children:Object(n.jsx)(Je.a,{className:Object(yt.a)(t.expand,Object(Ue.a)({},t.expandOpen,c)),onClick:o,"aria-expanded":c,"aria-label":"show more",id:"outline",children:Object(n.jsx)(kt.a,{onClick:o,id:"outline"})})}),Object(n.jsx)(vt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(n.jsxs)(_t.a,{children:[Object(n.jsxs)(ht.a,{paragraph:!0,children:[function(){return null!=e.data.freeday?Object(n.jsxs)(n.Fragment,{children:["freeday: ",e.data.freeday]}):null},"  ",function(){return null!=e.data.time_start||null!=e.data.time_end?Object(n.jsxs)(n.Fragment,{children:[e.data.time_start,"~",e.data.time_end]}):Object(n.jsx)(n.Fragment,{})}]}),Object(n.jsx)(ht.a,{className:"card_intro",paragraph:!0,children:e.intro})]})})]})};var Pt=Object(l.b)((function(e){return{id:e.auth_reducer.id,swiped:e.swipe_reducer.swiped,liked:e.swipe_reducer.liked,swipe_id:e.swipe_reducer.swipe_id,cards:e.swipe_reducer.cards}}),(function(e){return{Swipe:function(t,a,n){return e(function(e,t,a){return function(){var n=Object(Ce.a)(we.a.mark((function n(r){var c,i,s;return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c={headers:{"Content-Type":"application/json"}},i=null,i=null===a?JSON.stringify({swiped:t}):JSON.stringify({swiped:t,liked:a}),n.next=6,Ie.a.put("".concat("https://speakup-heroku.herokuapp.com","/swipe/update/").concat(e,"/"),i,c);case 6:s=n.sent,console.log(s.data),r({type:G,payload:s.data}),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(t,a,n))},chat_create:function(t,a){return e(function(e,t){return function(){var a=Object(Ce.a)(we.a.mark((function a(n){var r,c,i;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null==e){a.next=17;break}return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({participants:[e,t]}),a.prev=3,a.next=6,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/chat-api/chat/create/"),c,r);case 6:i=a.sent,console.log(i.data),n({type:H,payload:i.data}),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(3),n({type:Y,payload:a.t0.response.request.response}),n({type:ie,payload:a.t0.response.request.response});case 15:a.next=19;break;case 17:n({type:Y,payload:"An error occured. please try again."}),n({type:ie,payload:"An error occured. please try again."});case 19:case"end":return a.stop()}}),a,null,[[3,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},add_friend:function(t,a){return e(function(e,t){return function(){var a=Object(Ce.a)(we.a.mark((function a(n){var r,c,i;return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({friend:t}),a.next=5,Ie.a.put("".concat("https://speakup-heroku.herokuapp.com","/chat-api/contact/update/").concat(e,"/"),c,r);case 5:i=a.sent,n({type:"CONTACT_UPDATE_SUCCESS",payload:i.data}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:"CONTACT_UPDATE_FAIL",payload:a.t0.response.request.response}),n({type:ie,payload:a.t0.response.request.response});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},receive_swipe:function(t){return e(ze(t))},card_receive:function(){return e(function(){var e=Object(Ce.a)(we.a.mark((function e(t){var a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("card_receive is called"),e.prev=1,e.next=4,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/profile/list/"));case 4:a=e.sent,console.log(JSON.stringify(a.data)),t({type:W,payload:a.data}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t({type:ie,payload:e.t0.response}),t({type:V,payload:e.t0.response});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=Object(i.useState)([]),a=Object(Le.a)(t,2),r=a[0],c=a[1],o=Object(i.useState)(),l=Object(Le.a)(o,2),u=(l[0],l[1]),d=Object(i.useState)(!1),p=Object(Le.a)(d,2),j=p[0],m=p[1],h=Object(i.useState)(),b=Object(Le.a)(h,2),f=b[0],g=b[1],O=Object(i.useState)(!0),_=Object(Le.a)(O,2),x=_[0],v=(_[1],[]);Object(i.useEffect)((function(){e.card_receive(),e.receive_swipe(e.id),c(e.cards)}),[]);var y=r,S=Object(i.useMemo)((function(){return null!=r?Array(r.length).fill(0).map((function(e){return s.a.createRef()}),[]):null})),k=function(){var t=Object(Ce.a)(we.a.mark((function t(a,n){var r;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("name:",n.name),u(a),v.push(n.name),"right"!==a){t.next=12;break}return e.Swipe(e.swipe_id,n.user,n.user),t.next=7,Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/swipe/detail/").concat(n.user,"/"));case 7:r=t.sent,console.log(JSON.stringify(r)),r.data.liked.includes(Number(e.id))&&(console.log("MATCH"),g(n),m(!0),e.chat_create(e.id,n.user),e.add_friend(e.id,n.user)),t.next=13;break;case 12:e.Swipe(e.swipe_id,n.user,null);case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),w=function(e){var t=r.filter((function(e){return!v.includes(e.name)}));if(t.length){var a=t[t.length-1],n=r.map((function(e){return e.name})).indexOf(a.name);S[n].current.swipe(e),k(e,a)}};return null!==e.swiped&&void 0!==e.swiped&&e.swiped.length>0&&(v=Object(be.a)(e.swiped)),Object(n.jsxs)("div",{children:[Object(n.jsx)(tt,{}),Object(n.jsxs)("div",{className:"cards",children:[null!=r&&r.length>0?r.map((function(t,a){return t.user===e.id||!0===e.swiped.includes(t.user)?Object(n.jsx)(n.Fragment,{}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Ze.a,{ref:S[a],className:"swipe",onSwipe:function(e){return k(e,t)},onCardLeftScreen:function(){return e=t.name,console.log(e+" left the screen!"),y=y.filter((function(t){return t.name!==e})),void c(y);var e},preventSwipe:["up","down"],children:Object(n.jsx)(Lt,{data:t})},t.name)})})):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)("div",{style:{marginLeft:"15px",marginTop:"100px",textAlign:"center"},children:x?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Be.Ripple,{color:"skyblue",size:"200px",style:{zIndex:"-1"}}),Object(n.jsxs)("h1",{style:{color:"#2c7f80"},children:["You swiped all cards.",Object(n.jsx)("br",{}),"Please wait until new accouts will be created."]})]}):Object(n.jsx)(n.Fragment,{})}),Object(n.jsx)(Ft,{person:f,onClose:function(){m(!1)},popup:j})]}),Object(n.jsx)(ot,{swipe_left:function(){return w("left")},swipe_right:function(){return w("right")}})]})})),Mt=(a(255),Object(lt.a)((function(e){return{expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})));Object(l.b)((function(e){return{person:e.profile_reducer,name:e.profile_reducer.name,gender:e.profile_reducer.gender,age:e.profile_reducer.age,native_lan:e.profile_reducer.native_lan,foreign_lan:e.profile_reducer.foreign_lan,image:e.profile_reducer.image,location:e.profile_reducer.location,time_start:e.profile_reducer.time_start,time_end:e.profile_reducer.time_end,intro:e.profile_reducer.intro,freeday:e.profile_reducer.freeday}}),null)((function(e){Mt();var t=s.a.useState(!1),a=Object(Le.a)(t,2);return a[0],a[1],console.log(e.person),Object(n.jsx)(Lt,{data:e.person})})),a(256);var Jt=Object(l.b)((function(e){return{person:e.profile_reducer,images:e.image_reducer.images}}),(function(e){return{logout:function(){return e((function(e){e({type:x})}))}}}))((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(tt,{}),Object(n.jsxs)("div",{id:"setting_content",style:{justifyContent:"space-evenly"},children:[Object(n.jsx)(Lt,{data:e.person,images:e.images}),Object(n.jsxs)("div",{className:"Button",children:[Object(n.jsx)(ye.b,{to:"/edit",children:Object(n.jsx)("button",{className:"setting_button1",onfocus:"this.blur();",children:Object(n.jsx)("span",{children:"Edit Your Profile"})})}),Object(n.jsx)(ye.b,{to:"/",children:Object(n.jsx)("button",{className:"setting_button1",onfocus:"this.blur();",onClick:e.logout,children:Object(n.jsx)("span",{children:"Log Out"})})}),Object(n.jsx)("button",{className:"setting_button3",onfocus:"this.blur();",children:Object(n.jsx)("span",{children:"Delete Your Account"})})]})]})]})})),zt=a(152),qt=a.n(zt),Bt=a(105),Gt=a(146),Wt=a.n(Gt),Vt=a(148),Ht=a(87),Yt=a(147),Kt=a.n(Yt),Zt=(a(257),a(258),Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,maxWidth:"700px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})));var Qt=Object(l.b)((function(e){return{id:e.auth_reducer.id,profile_id:e.profile_reducer.profile_id}}),(function(e){return{image_create:function(t,a,n,r,c,i,s){return e(function(e,t,a,n,r,c,i){return function(){var e=Object(Ce.a)(we.a.mark((function e(s){var o,l,u;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={headers:{"Content-Type":"multipart/form-data"}},(l=new FormData).append("image",a),l.append("x",n),l.append("y",r),l.append("width",c),l.append("height",i),l.append("album",t),e.next=11,Ie.a.post("".concat("https://speakup-heroku.herokuapp.com","/profile/image/"),l,o);case 11:u=e.sent,s({type:D,payload:u.data}),s(qe(t)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),void 0===e.t0.response?(s({type:D}),s(qe(t))):(s({type:F}),s({type:ie,paylaod:e.t0.response}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()}(0,a,n,r,c,i,s))}}}))((function(e){var t=Zt(),a=s.a.useState(e.open),r=Object(Le.a)(a,2),c=r[0],o=r[1],l=Object(i.useState)({width:0,height:0}),u=Object(Le.a)(l,2),d=u[0],p=u[1];Object(i.useEffect)((function(){var t=new Image;t.src=e.url,t.onload=function(){p({width:t.width,height:t.height})}}),[]);var j=Object(i.useState)({aspect:14/19}),m=Object(Le.a)(j,2),h=m[0],b=m[1];return Object(n.jsx)("div",{className:"crop",children:Object(n.jsx)(ut.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:c,closeAfterTransition:!0,BackdropComponent:dt.a,BackdropProps:{timeout:500},children:Object(n.jsx)(pt.a,{in:c,children:Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(Kt.a,{src:e.url,crop:h,onChange:function(e){return b(e)}}),Object(n.jsxs)("div",{className:"crop_button",children:[Object(n.jsx)("button",{className:"cancel_button",onClick:function(){e.parent_popup(!1),o(!1)},id:"outline",children:"Cancel"}),Object(n.jsx)("button",{className:"upload_button",onClick:function(){e.parent_popup(!1);var t=h.x,a=h.y,n=h.width,r=h.height;d.height>600?(t=h.x*(d.height/600),a=h.y*(d.height/600),n=h.width*(d.height/600),r=h.height*(d.height/600)):d.weight>700&&(t=h.x*(d.height/700),a=h.y*(d.height/700),n=h.width*(d.height/700),r=h.height*(d.height/700)),console.log(t,a,n,r),e.image_create(e.id,e.profile_id,e.image,t,a,n,r),o(!1)},id:"outline",children:"Upload"})]})]})})})})})),Xt=(a(259),Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"500px",height:"200px",textAlign:"center"}}})));var $t=Object(l.b)((function(e){return{images:e.image_reducer.images,profile_id:e.profile_reducer.profile_id}}),(function(e){return{delete_image:function(t,a){return e(function(e,t){return function(){var a=Object(Ce.a)(we.a.mark((function a(n){return we.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ie.a.delete("".concat("https://speakup-heroku.herokuapp.com","/profile/image/").concat(t,"/"));case 3:n({type:P}),n(qe(e)),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:M}),n({type:ie,payload:a.t0.response});case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))((function(e){console.log(e.deleting_image),console.log(e.i);var t=Xt(),a=s.a.useState(e.open),r=Object(Le.a)(a,2),c=r[0],i=r[1],o=function(){i(!1),e.parent_popup(!1)};return Object(n.jsx)("div",{children:Object(n.jsx)(ut.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:c,onClose:o,closeAfterTransition:!0,BackdropComponent:dt.a,BackdropProps:{timeout:500},children:Object(n.jsx)(pt.a,{in:c,children:Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)("h1",{style:{fontSize:"30px"},children:"Are you sure you want to delete this picture?"}),Object(n.jsxs)("div",{className:"crop_button",children:[Object(n.jsx)("button",{className:"cancel_button",onClick:o,id:"outline",children:"Cancel"}),Object(n.jsx)("button",{className:"upload_button",onClick:function(){var t;for(i(!1),e.parent_popup(!1),t=0;t<e.images.length;t++)e.images[t].image===e.deleting_image&&e.delete_image(e.profile_id,e.images[t].id)},id:"outline",children:"Delete"})]})]})})})})})),ea=a(151),ta=a.n(ea),aa=a(150),na=a.n(aa),ra=(a(260),function(e,t,a,n,r,c){return function(i){return t&&i===a?{x:n%3*170+r,y:220*(n>2?1:0)+c,scale:1.1,zIndex:"1",shadow:15,immediate:function(e){return"y"===e||"zIndex"===e}}:{x:e.indexOf(i)%3*170,y:220*(e.indexOf(i)>2?1:0),scale:1,zIndex:"0",shadow:1,immediate:!1}}});var ca=function(e){var t=e.images,a=Object(i.useRef)(t.map((function(e,t){return t}))),r=Array.from({length:6-t.length},(function(e,t){return t})),c=Object(i.useState)(),s=Object(Le.a)(c,2),o=s[0],l=s[1],d=Object(i.useState)(),p=Object(Le.a)(d,2),j=p[0],m=p[1],h=Object(i.useState)(!1),b=Object(Le.a)(h,2),f=b[0],g=b[1],O=Object(i.useState)(!1),_=Object(Le.a)(O,2),x=_[0],v=_[1],y=Object(i.useState)(),S=Object(Le.a)(y,2),k=S[0],w=S[1],C=Object(Ht.c)(t.length,ra(a.current)),N=Object(Le.a)(C,2),I=N[0],E=N[1],A=function(e){console.log(e.target.files[0]),m(URL.createObjectURL(e.target.files[0])),l(e.target.files[0]),g(!0)},T=Object(Vt.a)((function(e){var n,r,c=Object(Le.a)(e.args,1)[0],i=e.down,s=Object(Le.a)(e.movement,2),o=s[0],l=s[1],u=Object(Le.a)(e.delta,2),d=(u[0],u[1],a.current.indexOf(c));t.length>3?(n=2,r=3):t.length>2?(n=1,r=3):t.length>1?(n=1,r=2):(n=1,r=1),console.log(d),console.log(r);var p,j=d%r,m=d>2?1:0,h=Object(Bt.a)(Math.round((200*j+o)/200),0,r-1),b=Object(Bt.a)(Math.round((100*m+l)/100),0,n-1);p=2===h&&1===b?5:1===h&&1===b?4:0===h&&1===b?3:2===h&&0===b?2:1===h&&0===b?1:0;var f=Wt()(a.current,d,p);E(ra(f,i,c,d,o,l)),i||(a.current=f)}));return Object(n.jsxs)("div",{className:"images_box",children:[f?Object(n.jsx)(Qt,{open:f,image:o,url:j,parent_popup:g}):Object(n.jsx)(n.Fragment,{}),x?Object(n.jsx)($t,{open:x,parent_popup:v,deleting_image:k}):Object(n.jsx)(n.Fragment,{}),I.map((function(e,a){var r=e.zIndex,c=e.shadow,i=e.x,s=e.y,o=e.scale;return Object(n.jsx)(Ht.a.div,Object(u.a)(Object(u.a)({},T(a)),{},{style:{zIndex:r,boxShadow:c.interpolate((function(e){return"rgba(0, 0, 0, 0.15) 0px ".concat(e,"px ").concat(2*e,"px 0px")})),transform:Object(Ht.b)([i,s,o],(function(e,t,a){return"translate3d(".concat(e,"px,").concat(t,"px,0px) scale(").concat(a,")")})),backgroundImage:"url(".concat(t[a].image,")"),backgroundSize:"cover"},children:Object(n.jsx)(na.a,{onClick:function(){return function(e){v(!0),w(t[e].image)}(a)},className:"delete_image"})}),a)})),r.map((function(e){return Object(n.jsxs)("div",{className:"new_image",style:{top:e<3?"230px":"10px",right:e%3===0?"-170px":(e-1)%3===0?"0px":"170px"},children:[Object(n.jsx)("label",{for:"file-upload",class:"custom-file-upload",children:Object(n.jsx)(ta.a,{className:"add_image"})}),Object(n.jsx)("input",{type:"file",name:"image",accept:"image/png, image/jpeg",size:"60",id:"file-upload",onChange:A})]})}))]})};a(261);var ia=Object(l.b)((function(e){return{profile_id:e.profile_reducer.profile_id,name:e.profile_reducer.name,gender:e.profile_reducer.gender,age:e.profile_reducer.age,native_lan:e.profile_reducer.native_lan,foreign_lan:e.profile_reducer.foreign_lan,images:e.image_reducer.images,location:e.profile_reducer.location,time_start:e.profile_reducer.time_start,time_end:e.profile_reducer.time_end,intro:e.profile_reducer.intro,freeday:e.profile_reducer.freeday}}),(function(e){return{update:function(t,a,n,r,c,i,s,o,l,u,d,p){return e(function(e,t,a,n,r,c,i,s,o,l,u){return function(){var d=Object(Ce.a)(we.a.mark((function d(p){var j,m,h;return we.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("time:",typeof s),d.prev=1,j={headers:{"Content-Type":"application/json"}},m=JSON.stringify({name:t,age:a,gender:n,native_lan:r,foreign_lan:c,location:i,time_start:s,time_end:o,intro:l,freeday:u}),d.next=6,Ie.a.put("".concat("https://speakup-heroku.herokuapp.com","/profile/update/").concat(e,"/"),m,j);case 6:h=d.sent,p({type:E,payload:h.data}),d.next=14;break;case 10:d.prev=10,d.t0=d.catch(1),p({type:A,payload:d.t0.reponse.request.reponse.request.reponse.request.reponse}),p({type:ie,payload:d.t0.reponse.request.reponse.request.reponse.request.reponse});case 14:case"end":return d.stop()}}),d,null,[[1,10]])})));return function(e){return d.apply(this,arguments)}}()}(t,a,n,r,c,i,s,o,l,u,d))}}}))((function(e){console.log(e.images);var t=Object(i.useState)(!1),a=Object(Le.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)({profile_id:e.profile_id,name:e.name,gender:e.gender,age:e.age,native_lan:e.native_lan,foreign_lan:e.foreign_lan,location:e.location,time_start:e.time_start,time_end:e.time_end,intro:e.intro,freeday:e.freeday}),o=Object(Le.a)(s,2),l=o[0],d=o[1],p=["Arabic","Bengali","Burmese","Chinese","English","French","German","Gujarati","Hindi","Italian","Japanese","Kannada","Korean","Malayalam","Marathi","Oriya","Panjabi","Persian","Polish","Portuguese","Russian","Spanish","Tamil","Telugu","Thai","Turkish","Ukrainian","Urdu","Vietnamese"],j=l.profile_id,m=l.name,h=l.age,b=l.gender,f=l.native_lan,g=l.foreign_lan,O=l.location,_=l.time_start,x=l.time_end,v=l.intro,y=l.freeday,S=function(e){return d(Object(u.a)(Object(u.a)({},l),{},Object(Ue.a)({},e.target.name,e.target.value)))};return r?Object(n.jsx)(Se.a,{to:"/setting"}):Object(n.jsxs)("div",{className:"edit",children:[Object(n.jsx)("div",{className:"edit_header",children:Object(n.jsx)(ye.b,{to:"/setting",children:Object(n.jsx)(Je.a,{style:{outline:"none"},children:Object(n.jsx)(qt.a,{})})})}),Object(n.jsx)("div",{className:"edit_setting",children:Object(n.jsxs)("form",{className:"edit_form",onSubmit:function(t){t.preventDefault(),e.update(j,m,h,b,f,g,O,_,x,v,y),c(!0)},encType:"multipart/form-data",children:[Object(n.jsxs)("div",{className:"edit_container",children:[Object(n.jsx)("h1",{children:"Your Profile"}),Object(n.jsx)(ca,{images:e.images}),Object(n.jsx)("input",{placeholder:"name",type:"text",name:"name",value:m,className:"edit_input",id:"edit_name",onChange:S}),Object(n.jsx)("input",{placeholder:"age",type:"number",name:"age",value:parseInt(h),className:"edit_input",onChange:S}),Object(n.jsxs)("select",{className:"edit_select",name:"gender",onChange:S,children:[Object(n.jsx)("option",{hidden:!0,children:"gender"}),["Male","Female","Other"].map((function(e){return e===b?Object(n.jsx)("option",{selected:!0,value:e,children:e}):Object(n.jsx)("option",{value:e,children:e})}))]}),Object(n.jsxs)("select",{className:"edit_select",name:"native_lan",onChange:S,required:!0,children:[Object(n.jsx)("option",{hidden:!0,children:"You speak..."}),p.map((function(e){return e===f?Object(n.jsx)("option",{selected:!0,value:e,children:e}):Object(n.jsx)("option",{value:e,children:e})}))]}),Object(n.jsxs)("select",{className:"edit_select",name:"foreign_lan",onChange:S,required:!0,children:[Object(n.jsx)("option",{hidden:!0,children:"You want to learn ..."}),p.map((function(e){return e===g?Object(n.jsx)("option",{selected:!0,value:e,children:e}):Object(n.jsx)("option",{value:e,children:e})}))]}),Object(n.jsxs)("select",{className:"edit_select",name:"freeday",onChange:S,children:[Object(n.jsx)("option",{hidden:!0,children:"You are free on ..."}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((function(e){return e===y?Object(n.jsx)("option",{selected:!0,value:e,children:e}):Object(n.jsx)("option",{value:e,children:e})}))]}),Object(n.jsxs)("div",{className:"edit_time",children:[Object(n.jsx)("input",{type:"time",className:"edit_input_time",name:"time_start",value:_,onChange:S}),"~",Object(n.jsx)("input",{type:"time",className:"edit_input_time",name:"time_end",value:x,onChange:S})]}),Object(n.jsx)("textarea",{placeholder:"Write your profile message here!",name:"intro",value:v,type:"text",className:"edit_input",onChange:S})]}),Object(n.jsx)("button",{className:"edit_button",type:"submit",children:Object(n.jsx)("span",{children:"SAVE"})})]})})]})})),sa=a(28),oa=a(32),la=function(){function e(){Object(sa.a)(this,e),this.callbacks={},this.socketRef=null}return Object(oa.a)(e,null,[{key:"getInstance",value:function(){return e.instace||(e.instance=new e),e.instance}}]),Object(oa.a)(e,[{key:"connect",value:function(e){var t=this,a="https:"===window.location.protocol?"wss":"ws",n=window.location.host,r="".concat(a,"://").concat(n,"/ws/chat/").concat(e,"/");this.socketRef=new WebSocket(r),this.socketRef.onopen=function(){console.log("open")},this.socketNewMessage(JSON.stringify({command:"messages"})),this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onclose=function(){console.log("close"),t.connect()},this.socketRef.onerror=function(e){console.log("error in Websocket::",e)}}},{key:"disconnect",value:function(){this.socketRef.close()}},{key:"socketNewMessage",value:function(e){var t=JSON.parse(e),a=t.command;console.log("Parsedata in Websocket::",t),0!==Object.keys(this.callbacks).length&&("messages"===a&&(t.messages?this.callbacks[a](t.messages):t.files&&this.callbacks[a](t.files)),"new_message"===a&&(t.message?this.callbacks[a](t.message):t.file&&this.callbacks[a](t.file)))}},{key:"fetchMessages",value:function(e,t){this.sendMessage({command:"fetch_messages",username:e,ChatID:t})}},{key:"newChatMessage",value:function(e){console.log("newChatMessage::",e),this.sendMessage({command:"new_message",from:e.from,message:e.content,ChatID:e.ChatID,files:e.files})}},{key:"addCallbacks",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:"sendMessage",value:function(e){console.log("data in sendMessage",e);try{this.socketRef.send(JSON.stringify(Object(u.a)({},e)))}catch(t){console.log(t.message)}}},{key:"state",value:function(){return this.socketRef.readyState}}]),e}();la.instance=null;var ua=la.getInstance(),da=a(327),pa=a(154),ja=a.n(pa),ma=a(155),ha=a.n(ma),ba=a(324),fa=a(86),ga=a.n(fa),Oa=a(72),_a=a.n(Oa);a(262);function xa(e,t){setTimeout((function(){if(1===t.state())return console.log("connection is secure"),void e();console.log("waiting for connection ...."),xa(e,t)}),100)}var va=function(e,t,a,n,r){console.log("SEND MESSAGEHANDLER");var c=n.concat(r);console.log("files_list",a);var i={from:t.name,content:a,ChatID:t.ChatID,files:c};e.newChatMessage(i)};function ya(e,t){xa((function(){t.addCallbacks(e.fetch_messages,e.new_message),t.fetchMessages(e.name,e.ChatID)}),t)}var Sa=Object(lt.a)((function(e){return{root:{maxWidth:400,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:475,display:"block",maxWidth:400,overflow:"hidden",width:"100%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",marginRight:"auto",outline:"none",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var ka=function(e){var t=Sa(),a=s.a.useState(!1),r=Object(Le.a)(a,2),c=r[0],i=r[1],o=function(){i(!c)},l=Object(jt.a)(),u=s.a.useState(0),d=Object(Le.a)(u,2),p=d[0],j=d[1],m=e.data.images.length>0?e.data.images.length:1;return Object(n.jsxs)(Ot.a,{id:"card_root",children:[Object(n.jsxs)("div",{id:"card_imagebox",children:[Object(n.jsx)(At.a,{axis:"rtl"===l.direction?"x-reverse":"x",index:p,onChangeIndex:function(e){j(e)},enableMouseEvents:!0,children:void 0===e.images?e.data.images.map((function(a,r){return Object(n.jsx)("div",{children:Math.abs(p-r)<=2?Object(n.jsx)("img",{className:t.img,src:a}):null},e.data.name)})):e.images.map((function(a,r){return Object(n.jsx)("div",{children:Math.abs(p-r)<=2?Object(n.jsx)("img",{className:t.img,src:a.image}):null},e.id)}))}),Object(n.jsx)(Je.a,{id:"match_icon",onHover:function(){return e.onClose(!1)},children:Object(n.jsx)(gt.a,{style:{fontSize:"large"},onHover:function(){return console.log("clicked")}})}),Object(n.jsx)("div",{id:"card_stepper",children:Object(n.jsx)(mt.a,{variant:"dots",steps:m>1?m:0,position:"static",activeStep:p,nextButton:Object(n.jsx)(bt.a,{size:"small",onClick:function(){j((function(e){return e+1}))},disabled:p===m-1,id:"outline",children:"rtl"===l.direction?Object(n.jsx)(Ct.a,{}):Object(n.jsx)(It.a,{})}),backButton:Object(n.jsx)(bt.a,{size:"small",onClick:function(){j((function(e){return e-1}))},disabled:0===p,id:"outline",children:"rtl"===l.direction?Object(n.jsx)(It.a,{}):Object(n.jsx)(Ct.a,{})})})})]}),Object(n.jsx)(Je.a,{id:"match_icon",onClick:function(){return e.onClose(!1)},children:Object(n.jsx)(gt.a,{style:{fontSize:"large"}})}),Object(n.jsx)(_t.a,{children:Object(n.jsx)(ht.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.name})}),Object(n.jsxs)(ht.a,{style:{marginLeft:"10px"},children:["native language: ",e.data.native_lan,Object(n.jsx)("br",{}),"want to learn: ",e.data.foreign_lan,Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)(xt.a,{disableSpacing:!0,children:Object(n.jsx)(Je.a,{className:Object(yt.a)(t.expand,Object(Ue.a)({},t.expandOpen,c)),onClick:o,"aria-expanded":c,"aria-label":"show more",id:"outline",children:Object(n.jsx)(kt.a,{onClick:o,id:"outline"})})}),Object(n.jsx)(vt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(n.jsxs)(_t.a,{children:[Object(n.jsxs)(ht.a,{paragraph:!0,children:[function(){return null!=e.data.freeday?Object(n.jsxs)(n.Fragment,{children:["freeday: ",e.data.freeday]}):null},"  ",function(){return null!=e.data.time_start||null!=e.data.time_end?Object(n.jsxs)(n.Fragment,{children:[e.data.time_start,"~",e.data.time_end]}):Object(n.jsx)(n.Fragment,{})}]}),Object(n.jsx)(ht.a,{className:"card_intro",paragraph:!0,children:e.intro})]})})]})},wa=Object(lt.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5]}}}));function Ca(e){var t=wa(),a=Object(i.useState)(),r=Object(Le.a)(a,2),c=r[0],s=r[1];return Object(i.useEffect)((function(){Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/profile/friend/").concat(e.friend_profile_id,"/")).then((function(e){s(e.data)}))}),[]),Object(n.jsx)("div",{children:Object(n.jsx)(ut.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.popup,closeAfterTransition:!0,BackdropComponent:dt.a,BackdropProps:{timeout:500},children:Object(n.jsx)(pt.a,{in:e.popup,children:Object(n.jsx)("div",{className:t.paper,children:Object(n.jsx)(ka,{data:c,onClose:e.onClose})})})})})}function Na(e){var t=(new Date).toLocaleString("en-GB",{timeZone:"Europe/London"}).split(","),a=Object(Le.a)(t,2),n=a[0],r=a[1],c=n.split("/"),i=Object(Le.a)(c,3),s=i[0],o=i[1],l=i[2],u=r.split(":"),d=Object(Le.a)(u,3),p=d[0],j=d[1];d[2];if("Start now"!==e){var m,h=e.split("T"),b=Object(Le.a)(h,2),f=b[0],g=b[1],O=f.split("-"),_=Object(Le.a)(O,3),x=_[0],v=_[1],y=_[2],S=g.split(":"),k=Object(Le.a)(S,3),w=k[0],C=k[1],N=(k[2],[s,o,l,p,j,x,v,y,w,C]);for(m=0;m<N.length;m++)N[m]=parseInt(N[m]);return s=N[0],o=N[1],l=N[2],p=N[3],j=N[4],x=N[5],v=N[6],y=N[7],w=N[8],C=N[9],l!==x?l-x===1?JSON.stringify(l-x)+"year ago":JSON.stringify(l-x)+"years ago":o!==v?o-v===1?JSON.stringify(o-v)+"month ago":JSON.stringify(o-v)+"months ago":s!==y?s-y===1?JSON.stringify(s-y)+"day ago":JSON.stringify(s-y)+"days ago":p!==w?p-w===1?JSON.stringify(p-w)+"hour ago":JSON.stringify(p-w)+"hours ago":j!==C?j-C===1?JSON.stringify(j-C)+"minute ago":JSON.stringify(j-C)+"minutes ago":"0 minute ago"}return""}function Ia(e,t){var a=e.concat(t);return a.sort((function(e,t){return new Date(e.timestamp.replace(" ","T"))-new Date(t.timestamp.replace(" ","T"))})),a}var Ea=a(153),Aa=a.n(Ea),Ta=a(326);var Ra=Object(l.b)((function(e,t){return{name:e.auth_reducer.name,ChatID:t.match.params.ChatID,friend:t.match.params.friend,friend_image:e.chat_reducer.friend_image,when_matched:e.chat_reducer.when_matched,friend_profile_id:e.chat_reducer.friend_profile_id,messages:e.chat_reducer.messages,files:e.chat_reducer.files,contents:Ia(e.chat_reducer.files,e.chat_reducer.messages)}}),(function(e){return{fetch_messages:function(t){return e((a=t,function(){var e=Object(Ce.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.length>0&&(a[0].content.includes("s3")?t({type:Q,payload:a}):t({type:K,payload:a}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},new_message:function(t){return e((a=t,function(){var e=Object(Ce.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a[0].content.includes("s3")?t({type:X,payload:a}):t({type:Z,payload:a});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a}}}))((function(e){var t=Object(i.useState)(""),a=Object(Le.a)(t,2),r=a[0],c=a[1],s=Object(i.useState)(!1),o=Object(Le.a)(s,2),l=o[0],u=o[1],d=Object(i.useState)([]),p=Object(Le.a)(d,2),j=p[0],m=p[1],h=Object(i.useState)([]),b=Object(Le.a)(h,2),f=b[0],g=b[1],O=Object(i.useState)(""),_=Object(Le.a)(O,2),x=(_[0],_[1],Object(i.useState)([])),v=Object(Le.a)(x,2),y=v[0],S=v[1],k=Object(i.useState)(12),w=Object(Le.a)(k,2);function C(e,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){console.log("Error: ",e)}}w[0],w[1],Object(i.useEffect)((function(){console.log(e.ChatID),ya(e,ua),ua.connect(e.ChatID),S.apply(void 0,Object(be.a)(y).concat(Object(be.a)(Ia(e.files,e.messages))))}),[e.ChatID]);var N="";function I(){u(!0)}var E=function(e){Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/chat-api/file/download/").concat(e.id,"/"))};return Object(Ta.a)(),Object(n.jsxs)("div",{className:"chatScreen",children:[Object(n.jsxs)("header",{className:"chatScreen_header",children:[Object(n.jsx)(ye.b,{to:"/chatpanel",children:Object(n.jsx)(Je.a,{id:"chatScreen_header_back_icon",children:Object(n.jsx)(Me.a,{style:{fontSize:"30px"}})})}),Object(n.jsx)(Je.a,{id:"chatScreen_header_video_icon",onClick:function(){Ie.a.get("http://localhost:5000/join").then((function(t){var a="".concat(e.name," is calling you \n\n  \n             ").concat(window.location.origin,"/join/").concat(t.data.link);m([]),g([]),va(ua,e,a,j,f)}))},children:Object(n.jsx)(Aa.a,{style:{fontSize:"30px",marigin:"10px"}})})]}),Object(n.jsx)("div",{style:{position:"sticky",top:"30%",zIndex:0},children:Object(n.jsx)(De.a,{id:"chatScreen_logo"})}),Object(n.jsx)(Ca,{onClose:function(){u(!1)},popup:l,friend_profile_id:e.friend_profile_id}),Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsxs)("p1",{className:"chatScreen_match",children:["YOU MATCHED WITH ",e.friend," ON ",e.when_matched]})}),Object(n.jsx)("ul",{className:"chatScreen_messages",children:e.contents.map((function(t){return t.name===e.name?void 0!==t.file_name?t.file_name.includes("jpg","jpeg","png")?Object(n.jsxs)("div",{className:"chatScreen_message_sent",children:[Object(n.jsx)("div",{className:"chatScreen_download_sent",children:Object(n.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(n.jsx)(_a.a,{})})}),Object(n.jsx)("img",{src:t.content})]}):Object(n.jsx)("div",{className:"chatScreen_message_sent",children:Object(n.jsxs)("div",{className:"chatScreen_file_sent",children:[Object(n.jsx)(ga.a,{className:"chatScreen_file_icon"}),Object(n.jsx)("p2",{children:t.file_name}),Object(n.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(n.jsx)(_a.a,{})})]})}):Object(n.jsx)("div",{className:"chatScreen_message_sent",children:Object(n.jsxs)("p",{className:"chatScreen_sent",children:[t.content,Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.timestamp.substring(0,16)})]})}):void 0!==t.file_name?t.file_name.includes("jpg","jpeg","png")?Object(n.jsxs)("div",{className:"chatScreen_message_reply",children:[Object(n.jsx)(da.a,{className:"chatScreen_image",alt:t.name,src:e.friend_image,onClick:I}),Object(n.jsxs)("div",{className:"chatScreen_text",children:[Object(n.jsx)("img",{src:t.content}),Object(n.jsx)("div",{className:"chatScreen_download_reply",children:Object(n.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(n.jsx)(_a.a,{})})})]})]}):Object(n.jsxs)("div",{className:"chatScreen_message_reply",children:[Object(n.jsx)(da.a,{className:"chatScreen_image",alt:t.name,src:e.friend_image,onClick:I}),Object(n.jsx)("div",{className:"chatScreen_text",children:Object(n.jsxs)("div",{className:"chatScreen_file_reply",children:[Object(n.jsx)(ga.a,{className:"chatScreen_file_icon"}),Object(n.jsx)("p2",{children:t.file_name}),Object(n.jsx)(Je.a,{style:{outline:"none"},onClick:function(e){return E(t)},children:Object(n.jsx)(_a.a,{})})]})})]}):Object(n.jsxs)("div",{className:"chatScreen_message_reply",children:[Object(n.jsx)(da.a,{className:"chatScreen_image",alt:t.name,src:e.friend_image,onClick:I}),Object(n.jsx)("div",{className:"chatScreen_text",children:Object(n.jsxs)("p",{className:"chatScreen_reply",children:[t.content,Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.timestamp.substring(0,16)})]})})]})}))}),Object(n.jsx)("div",{children:Object(n.jsxs)("form",{className:"chatScreen_input",onSubmit:function(t){t.preventDefault(),(r.length>0||j.length>0||f.length>0)&&(va(ua,e,r,j,f),console.log("submitted")),c(""),m([]),g([])},children:[Object(n.jsx)("label",{for:"file-upload",class:"custom-file-upload",style:{marginTop:"auto"},children:Object(n.jsx)(ja.a,{})}),Object(n.jsx)("input",{type:"file",name:"image",accept:"audio/*, .pdf, .txt, .gif, .docx, .xlsx, .pptx, .pps",size:"60",id:"file-upload",onChange:function(e){C(e.target.files[0],(function(t){N=t,g([].concat(Object(be.a)(f),[{name:e.target.files[0].name,file:N}]))}))}}),Object(n.jsx)("label",{for:"image-upload",class:"custom-file-upload",style:{marginTop:"auto"},children:Object(n.jsx)(ha.a,{})}),Object(n.jsxs)("div",{className:"chatScreen_input_field",style:j.length>0?{border:"solid aqua"}:{},children:[f.length>0?f.map((function(e){return Object(n.jsxs)("div",{className:"chatScreen_file_outer",children:[Object(n.jsx)(ga.a,{className:"chatScreen_file_icon"}),Object(n.jsx)("p1",{children:e.name})]})})):Object(n.jsx)(n.Fragment,{}),j.length>0?j.map((function(e){return Object(n.jsx)("img",{src:e.file})})):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)("input",{type:"file",name:"image",accept:"image/*, video/*",size:"60",id:"image-upload",onChange:function(e){C(e.target.files[0],(function(t){N=t,m([].concat(Object(be.a)(j),[{name:e.target.files[0].name,file:N}]))}))}}),Object(n.jsx)(ba.a,{className:"chatScreen_input_text",rowsMax:4,placeholder:"Message",onChange:function(e){c(e.target.value)}})]}),Object(n.jsx)("button",{className:"chatScreen_submit",type:"submit",children:"SEND"})]})})]})}));a(263);var Da=Object(l.b)(null,(function(e){return{set_friend:function(t,a,n){return e(function(e,t,a){return function(){var n=Object(Ce.a)(we.a.mark((function n(r){return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:$,payload:{image:e,when_matched:t,friend_profile_id:a}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,a,n))}}}))((function(e){var t="chat/".concat(e.friend_data.name,"/").concat(e.friend_data.Chat_ID,"/"),a=Object(i.useState)(!1),r=Object(Le.a)(a,2),c=r[0],s=r[1];return Object(n.jsxs)("div",{className:"chatpanel",children:[Object(n.jsx)(da.a,{className:"chatpanel_image",alt:e.friend_data.name,src:e.friend_data.image,onClick:function(){s(!0)}}),Object(n.jsxs)(ye.b,{to:t,onClick:function(){var t=e.friend_data.when_matched.split("T")[0];e.set_friend(e.friend_data.image,t,e.friend_data.profile_id)},className:"chatpanel_link",children:[Object(n.jsxs)("div",{className:"chatpanel_detail",children:[Object(n.jsx)("h2",{children:e.friend_data.name}),Object(n.jsx)("p",{children:e.friend_data.last_message})]}),Object(n.jsx)("p",{className:"chatpanel_timestamp",children:Na(e.friend_data.last_timestamp)})]}),Object(n.jsx)(Ca,{onClose:s,popup:c,friend_profile_id:e.friend_data.profile_id})]})}));var Fa=Object(l.b)((function(e){return{username:e.auth_reducer.name,id:e.auth_reducer.id}}),null)((function(e){var t=Object(i.useState)([]),a=Object(Le.a)(t,2),r=a[0],c=a[1];return Object(i.useEffect)((function(){Ie.a.defaults.headers={"Content-Type":"application/json"},Ie.a.get("".concat("https://speakup-heroku.herokuapp.com","/chat-api/chat/").concat(e.id,"/")).then((function(e){c([].concat(Object(be.a)(r),Object(be.a)(e.data.chats_list)))}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)(tt,{}),Object(n.jsx)("h1",{className:"chatpanel_title",children:"Messages"}),Object(n.jsxs)("div",{className:"chats",children:[r.map((function(e){return Object(n.jsx)(Da,{friend_data:e})})),0===r.length?Object(n.jsxs)("h2",{className:"chatpanel_nomatch",children:["You don't have any matches yet(\xb4;\u03c9;\uff40)",Object(n.jsx)("br",{}),"Let's Swipe!!"]}):Object(n.jsx)(n.Fragment,{})]})]})})),Ua=(a(264),a(156)),La=a.n(Ua),Pa=a(157),Ma=a.n(Pa),Ja=null,za={},qa={},Ba="",Ga=function(e){delete qa[e];var t=document.getElementById(e);t&&t.remove()},Wa=function(){function e(t){var a=this;Object(sa.a)(this,e),this.videoContainer={},this.message=[],this.streaming=!1,this.myID="",this.initializeSocketEvents=function(){a.socket.on("connect",(function(){console.log("socket connected")})),a.socket.on("user-disconnected",(function(e){console.log("user disconnected-- closing peers",e),za[e]&&za[e].close(),Ga(e)})),a.socket.on("disconnect",(function(){console.log("socket disconnected --")})),a.socket.on("error",(function(e){console.log("socket error --",e)}))},this.initializePeersEvents=function(){a.myPeer.on("open",(function(e){Ba=e;var t={userID:e,roomID:window.location.pathname.split("/")[2]};console.log("mydata::",t),a.socket.emit("join-room",t),a.setNavigatorToStream()})),a.myPeer.on("error",(function(e){console.log("peer connection error",e),a.myPeer.reconnect()}))},this.setNavigatorToStream=function(){a.getVideoAudioStream().then((function(e){e&&(a.streaming=!0,a.createVideo({id:Ba,stream:e}),a.setPeersListeners(e),a.newUserConnection(e))}))},this.getVideoAudioStream=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null===(e=a.settings.params)||void 0===e?void 0:e.quality;r&&(r=parseInt(r));var c=navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia||navigator.mediaDevices.mozGetUserMedia||navigator.mediaDevices.msGetUserMedia;return c({video:!!t&&{frameRate:r||12,noiseSuppression:!0,width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}},audio:n})},this.createVideo=function(e){if(console.log("video created"),qa[e.id]){document.getElementById(e.id).srcObject=e.stream}else{qa[e.id]=Object(u.a)({},e);var t=document.getElementById("room-container"),a=document.createElement("div"),n=document.createElement("video");n.srcObject=qa[e.id].stream,n.id=e.id,n.autoplay=!0,Ba===e.id&&(n.muted=!0,n.className="my_video"),a.appendChild(n),t.append(a)}},this.setPeersListeners=function(e){a.myPeer.on("call",(function(t){console.log("answered!!"),t.answer(e),t.on("stream",(function(e){console.log("user stream data",e),console.log(t.metadata),function(e){if(console.log("video created"),console.log("createobj::",e),qa[e.id])document.getElementById(e.id).srcObject=e.stream;else{qa[e.id]=Object(u.a)({},e);var t=document.getElementById("room-container"),a=document.createElement("div"),n=document.createElement("video");n.srcObject=qa[e.id].stream,n.id=e.id,n.autoplay=!0,Ba===e.id&&(n.muted=!0,n.className="my_video"),a.appendChild(n),t.append(a)}}({id:t.metadata.id,stream:e})})),t.on("close",(function(){console.log("closing peers listeners",t.metadata.id),Ga(t.metadata.id)})),t.on("error",(function(){console.log("peer error ------"),Ga(t.metadata.id)})),za[t.metadata.id]=t}))},this.newUserConnection=function(e){a.socket.on("new-user-connect",(function(t){a.connectToNewUser(t,e)}))},this.removeVideo=function(e){delete a.videoContainer[e];var t=document.getElementById(e);t&&t.remove()},this.destroyConnection=function(){var e,t,n=null===(e=a.videoContainer[a.myID])||void 0===e?void 0:e.stream.getTracks();null===n||void 0===n||n.forEach((function(e){e.stop()})),null===(t=Ja)||void 0===t||t.socket.disconnect(),a.myPeer.destroy()},this.settings=t,this.myPeer=new Ma.a,this.socket=La()("http://localhost:5000"),this.initializeSocketEvents(),this.initializePeersEvents()}return Object(oa.a)(e,[{key:"connectToNewUser",value:function(e,t){var a=this;console.log("connectTonewUser is called");var n=e.userID,r=this.myPeer.call(n,t,{metadata:{id:Ba}});console.log("your data:: new user connected",e),r.on("stream",(function(t){console.log("your stream::",t),a.createVideo({id:n,stream:t,userData:e})})),r.on("close",(function(){console.log("closing new user",n),Ga(n)})),r.on("error",(function(){console.log("peer error ------"),Ga(n)})),za[n]=r}}]),e}();var Va=Object(l.b)((function(e,t){return{state:e,object:t,quality:t.location.search.split("=")[-1]}}),null)((function(e){var t=Object(i.useRef)(null);Object(i.useEffect)((function(){a()}),[]);var a=function(){t.current=function(){return Ja=new Wa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({params:{quality:12}})};return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{id:"room-container"}),Object(n.jsx)("button",{onClick:function(){t.current&&t.current.destroyConnection(),e.history.push("/chatpanel")},children:"Disconnect"})]})})),Ha=Object(l.b)(null,(function(e){return{checkAuthenticated:function(){return e(Ee)}}}))((function(e){return Object(i.useEffect)((function(){e.checkAuthenticated()})),Object(n.jsx)(ye.a,{children:Object(n.jsxs)(Se.d,{children:[Object(n.jsx)(Se.b,{exact:!0,path:"/",component:Fe}),Object(n.jsx)(Se.b,{exact:!0,path:"/login",component:Ge}),Object(n.jsx)(Se.b,{exact:!0,path:"/signup",component:We}),Object(n.jsx)(Se.b,{exact:!0,path:"/reset_password",component:He}),Object(n.jsx)(Se.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:Ye}),Object(n.jsx)(Se.b,{exact:!0,path:"/activate/:uid/:token",component:Ve}),Object(n.jsx)(Se.b,{exact:!0,path:"/chat/:friend/:ChatID",component:Ra}),Object(n.jsx)(Se.b,{exact:!0,path:"/join/:room",component:Va}),Object(n.jsx)(Se.b,{exact:!0,path:"/swipe",component:Pt}),Object(n.jsx)(Se.b,{exact:!0,path:"/setting",component:Jt}),Object(n.jsx)(Se.b,{exact:!0,path:"/chatpanel",component:Fa}),Object(n.jsx)(Se.b,{exact:!0,path:"/edit",component:ia}),Object(n.jsx)(Se.b,{exact:!0,path:"/match",component:Ft}),Object(n.jsx)(Se.b,{exact:!0,path:"/delete",component:$t})]})})})),Ya=a(158),Ka=[a(159).a],Za=Object(o.createStore)(ve,{},Object(Ya.composeWithDevTools)(o.applyMiddleware.apply(void 0,Ka))),Qa=Object(n.jsx)(l.a,{store:Za,children:Object(n.jsx)(Ha,{})});c.a.render(Qa,document.getElementById("root"))},76:function(e,t,a){},98:function(e,t,a){}},[[291,1,2]]]);
//# sourceMappingURL=main.2fe0fd97.chunk.js.map